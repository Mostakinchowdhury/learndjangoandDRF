# Django + DRF ржлрзБрж▓ рж╣рзНржпрж╛ржирзНржб ржирзЛржб

ржЖржорж┐ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╕рзНржЯ ржЙржкрж╛рзЯрзЗ рж╢рж┐ржЦрждрзЗ ржЪрж╛ржЗ ржЖрж░ ржХрзЛржиржХрж┐ржЫрзБ ржжрзАрж░рзНржШржжрж┐ржи ржзрж░рзЗ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржЙржкрж╛рзЯ ржПржмржВ ржХрзЛржиржХрж┐ржЫрзБ
ржмрзЗрж╕рзНржЯ ржУрзЯрзЗрждрзЗ рж╢рзЗржЦрж╛рж░ ржкрзНрж░рж╕рзЗрж╕ рж╣рж▓рзЛ рж╕рзЗржЗ ржЯржкрж┐ржХ ржнрж╛рж▓рзЛ ржХрж░рзЗ ржкрзЬрж╛ рж╣рзНржпрж╛ржирзНржб ржирзЛржб ржХрж░рж╛ ржПржмржВ рждрж╛ ржмрзЗрж╢рж┐ ржмрзЗрж╢рж┐ ржХрж░рзЗ ржкрзНрж░рзНржпрж╛ржХрзНржЯрж┐рж╕
ржХрж░рж╛ред рждрж╛ржЗ ржЖржорж┐ django рж╢рж┐ржЦрждрзЗрж╕рж┐ ржПржмржВ рждрж╛ ржжрзАрж░рзНржШржжрж┐ржи ржзрж░рзЗ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп рж╣рзНржпрж╛ржирзНржбржирзЛржЯ ржХрж░рж╕рж┐ ржпрж╛рждрзЗ ржнржмрж┐рзОрж╖рждрзЗ ржЖржорж┐
django ржПржмржВ DRF рж░рж┐ржнрж╛ржЗрж╕ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ред ржЖржорж┐ ржЖрж╢рж╛ ржХрж░рж╕рж┐ ржпржжрж┐ ржХрзЗржЙ django + DRF ржЬрж╛ржирзЗржи ржХрж┐ржирзНрждрзБ ржЕржирзЗржХржжрж┐ржи ржзрж░рзЗ
ржкрзНрж░рзНржпрж╛ржХрзНржЯрж┐рж╕рзЗ ржирж╛ ржХрж░рж╛рж░ ржХрж╛рж░ржгрзЗ ржЖржкржирж┐ ржЕржирзЗржХ ржХрж┐ржЫрзБ ржнрзБрж▓рзЗ ржпрж╛ржи рждрж╛рж╣рж▓рзЗ ржПржЗ рж╣рзНржпрж╛ржирзНржбржирзЛржЯ ржЯрж┐ ржкрж░рзЗ ржЖржкржирж┐ рж░рж┐ржнрж╛ржЗрж╕ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржи
ржПрж░ ржлрж▓ ржЖржкржирж╛рж░ ржЖржмрж╛рж░ рж╕ржмржХрж┐ржЫрзБ ржЖрзЯрждрзНрждрзЗ ржЖрж╕ржмрзЗ ржЗржирж╢рж╛ржЖрж▓рзНрж▓рж╛рж╣ред

## Authors

- [@Mostakin IBN Mohir Ali](https://github.com/Mostakinchowdhury)

## Day 1: Django Introduction & Setup

django рж╣рж▓рзЛ ржкрж╛ржЗржержи рж▓рзНржпрж╛ржВржЧрзБрзЯрзЗржЬ ржПрж░ ржлрзНрж░рзЗржоржУрзЯрж╛рж░рзНржХ ржпрж╛ ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржУрзЯрзЗржм ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи ржПрж░ ржмрзНржпрж╛ржХржПржирзНржб ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ
ржкрж╛рж░рж┐ред Django MVT ржкрзНржпрж╛ржЯрж╛рж░рзНржирзЗ ржХрж╛ржЬ ржХрж░рж╛ред M=Model ,v=view ржПржирзНржб T=template. ржЖржорж╛ржжрзЗрж░ржХрзЗ django ржХржоржкрзНрж▓рж┐ржЯ рж╕рзЗржЯржЖржк
ржХрж░рж╛рж░ ржЬржирзНржп ржХрж┐ржЫрзБ step ржлрж▓рзЛ ржХрж░рж╛рж░ рж▓рж╛ржЧржмрзЗ ржирж┐ржЪрзЗ рждрж╛ ржПржХ ржПржХ ржХрж░рзЗ ржХрж░рзЗ ржЖржорж┐ Explain ржХрж░ржЫрж┐ ред

#### Step 1

Django рж╕рзЗржЯржЖржк ржХрж░рж╛рж░ ржЬржирзНржп ржкрзНрж░ржержорзЗ ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж╛ ржкрж╛ржЗржержи ржнрж╛рж░рзНржЪрзБрзЯрж╛рж▓ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ Make ржХрж░рждрзЗ рж╣ржмрзЗред ржнрж╛рж░рзНржЪрзБрзЯрж╛рж▓
ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ make ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗ ржХржорж╛ржирзНржб рждрж╛ cmd рждрзЗ run ржХрж░рждрзЗ рж╣ржмрзЗред

```bash
  python -m venv environment_name

```

- ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ ржЯрж┐ржХрзЗ ржПржХржЯрж┐ржн ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗ ржХржорж╛ржирзНржб рждрж╛ рж░рж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗ

```bash
   environment_name\scripts\activate
```

#### Step 2

ржПржЗ step ржП ржЖржорж╛ржжрзЗрж░ django ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржб ржжрж┐рзЯрзЗ ржЗржирж╕рзНржЯрж▓ ржХрж░рзЗ ржирж┐рждрзЗ рж╣ржмрзЗред

```bash
  pip install django

```

- django relatate рж╕ржм subcomand ржжрзЗржЦрж╛рж░ ржЬржирзНржп ржЖржорж░рж╛ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржб ржЯрж╛ рж░рж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рж┐ ржПржЗ ржХржорж╛ржирзНржб ржЯрж╛ рж░рж╛ржи ржХрж░рж▓рзЗ
  ржЖржорж╛ржжрзЗрж░ django relatate рж╕ржм sub command ржПрж░ ржПржХржЯрж╛ list ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЛ ржПржЗ ржХржорзНржпрж╛ржирзНржб ржЧрзБрж▓рж╛ ржжрж┐рзЯрзЗржЗ ржорзВрж▓ржд django
  ржПрж░ рж╕ржм ржХрж╛ржЬ ржХрж░рждрзЗ рж╣рзЯред

```bash
  django-admin

```

- output рж╣рж┐рж╕рж╛ржмрзЗ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржП ржПржЗ рж▓рж┐рж╕рзНржЯ ржЯрж╛ ржкрж╛ржмрзЛ

```bash
    check
    compilemessages
    createcachetable
    dbshell
    diffsettings
    dumpdata
    flush
    inspectdb
    loaddata
    makemessages
    makemigrations
    migrate
    optimizemigration
    runserver
    sendtestemail
    shell
    showmigrations
    sqlflush
    sqlmigrate
    sqlsequencereset
    squashmigrations
    startapp
    startproject
    test
    testserver
```

#### Step 3

ржПржмрж╛рж░ django ржжрж┐рзЯрзЗ ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж╛ project make ржХрж░рждрзЗ рж╣ржмрзЗ ржпрзЗржЗ ржкрзНрж░ржЬрзЗржХрзНржЯ ржП ржЕржирзЗржХржЧрзБрж▓рж╛ ржПржк ржерж╛ржХржмрзЗред ржкрзНрж░ржЬрзЗржХрзНржЯ
ржмрж╛ржирж╛ржирзЛрж░ ржЬржирзНржп django ржПрж░ sub command ржерзЗржХрзЗ startproject ржХржорж╛ржирзНржб ржЯрж╛ рж░рж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗред

```bash
  django-admin startproject project-folder-name

```

- project-folder-name ржирж╛ ржжрж┐рзЯрзЗ ржпржжрж┐ рж╢рзБржзрзБ ржПржХржЯрж╛ . (ржбржЯ) ржжрзЗрзЯ рждрж╛рж╣рж▓рзЗ ржкрзНрж░ржЬрзЗржХрзНржЯ ржПрж░ ржЬржирзНржп ржХрзЛржи ржлрзЛрж▓рзНржбрж╛рж░ ржХрзНрж░рж┐ржЯрзЗ ржирж╛
  рж╣рзЯрзЗ root ржлрзЛрж▓рзНржбрж╛рж░ ржПрж░ ржкрзНрж░ржЬрзЗржХрзНржЯ bundle ржбрж╛ржЙржирж▓рзЛржб рж╣ржмрзЗред

#### Step 3

рж▓рж╛рж╕рзНржЯ рж╕рзНржЯрзЗржк ржЯрж╛рждрзЗ ржЖржорж░рж╛ ржЖржорж╛ржжрзЗрж░ django ржПрж░ ржмрж┐рж▓рзНржб ржЗржи рж╕рж╛рж░рзНржнрж╛рж░ ржЯрж╛ржХрзЗ рж░рж╛ржи ржХрж░ржмрзЗ ржПрж░ ржЬржирзНржп ржЖржорж╛ржжрзЗрж░ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржб ржЯрж╛
рж▓рж┐ржЦрждрзЗ рж╣ржмрзЗ ржХржорж╛ржирзНржб promt ржПред

- ржпржжрж┐ ржЖржорж░рж╛ . ржирж╛ ржжрж┐рзЯрзЗ ржирждрзБржи projects ржПрж░ ржЬржирзНржп ржлрзЛрж▓рзНржбрж╛рж░ Create ржХрж░рж┐ рждрж╛рж╣рж▓рзЗ ржЖржЧрзЗ рж╕рзЗржЗ ржлрзЛрж▓рзНржбрж╛рж░ ржП ржпрзЗрждрзЗ рж╣ржмрзЗ

```bash
   cd project-folder-name

```

- ржПрж░ржкрж░ ржЖржорж╛ржжрзЗрж░ рж╕рж╛рж░рзНржнрж╛рж░ рж░рж╛ржи ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржб рждрж╛ рж░рж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗ ржЖрж░ ржпржжрж┐ . ржжрж┐рзЯрж╛ project create ржХрж░рж┐
  ржирждрзБржи ржлрзЛрж▓рзНржбрж╛рж░ ржирж╛ ржмрж╛ржирж╛ржЗ рждрж╛рж╣рж▓рзЗ ржЖржорж╛ржжрзЗрж░ cd ржХрж░рзЗ ржХрзЛржи ржлрзЛрж▓рзНржбрж╛рж░ ржП ржпрзЗрждрзЗ рж╣ржЗржмрзЗ ржирж╛ред

```bash
   python manage.py runserver

```

- Now you are create a blank django project successfully

## Startapp Basic view render

- App create ржХрж░рж╛рж░ ржЬржирзНржп ржЖржорж╛ржжрзЗрж░ ржирж┐ржЪрзЗрж░ ржХржорзНржпрж╛ржирзНржб ржЯрж╛ рж░рж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗред

  ```bash
  python manage.py startapp app-name

  ```

- ржПрж░ржкрж░ project ржПрж░ ржорзЗржЗржи setting.py ржПрж░ ржнрж┐рждрж░ installed_apps ржП ржЧрж┐рзЯрзЗ apps ржЯрж╛ржХрзЗ add ржХрж░рзЗ ржжрж┐рждрзЗ рж╣ржмрзЗред

```python

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

ALLOWED_HOSTS = []


# Application definition

INSTALLED_APPS = [
    "Your-app-name",
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]
```

- ржПрж░ржкрж░ main ржПрж░ urls.py рждрзЗ ржЧрж┐рзЯрзЗ ржПржк ржПрж░ urls.py ржХрзЗ include ржХрж░рждрзЗ рж╣ржмрзЗ

```python
from django.contrib import admin
from django.urls import path,include
urlpatterns = [
    path('admin/', admin.site.urls),
    path('',include("yourappname.urls"))
]

```

- ржПржЦржи ржЖржорж╛ржжрзЗрж░ ржПржк ржПрж░ urls.py ржП ржЧрж┐рзЯрзЗ app_name рж╕рзЗржЯ ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ рж╕рзЗржЗ рж╕рж╛ржерзЗ views.py ржП ржЧрж┐рзЯрзЗ ржнрж┐ржЙ create ржХрж░рждрзЗ
  рж╣ржмрзЗ рждрж╛ urls.py рждрзЗ urls mapping ржХрж░рзЗ ржкрж╛рже рж╕рзЗржЯ ржХрж░рзЗ ржжрж┐рждрзЗ рж╣ржмрзЗ

app/urls.py

```python
from django.urls import path
from . import views
app_name="home"
urlpatterns = [
    path('',views.viewname)
]
```

app/views.py

```python
from django.shortcuts import render

def viewname(request):
  return render(request,"appname/htmlfilename.html")
```

- ржПржЦржи ржЖржорж╛ржжрзЗрж░ simple ржЯрзЗржорзНржкрж▓рзЗржЯ рж░рзЗржирзНржбрж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржп рж▓рж╛рж╕рзНржЯ ржПржХржЯрж╛ рж╕рзНржЯрзЗржк рж░рзЯрзЗржЫрзЗ рждрж╛ рж╣рж▓рзЛ ржЯрзЗржорзНржкрж▓рзЗржЯрзЗ create ржХрж░рж╛ред
  ржЯрзЗржоржкрзНрж▓рзЗржЯ create ржХрж░рж╛рж░ ржЬржирзНржп ржЖржорж╛ржжрзЗрж░ app ржлрзЛрж▓рзНржбрж╛рж░ ржП template ржирж╛ржорзЗ ржПржХржЯрж╛ ржлрзЛрж▓рзНржбрж╛рж░ create ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ рж╕рзЗржЗ
  ржлрзЛрж▓рзНржбрж╛рж░ ржПрж░ ржнрж┐рждрж░ ржПржк ржПрж░ ржирж╛ржорзЗрж░ рж╕рж╛ржерзЗ ржорж┐рж▓ рж░рзЗржЦрзЗ ржЖрж░ ржУ ржПржХржЯрж╛ ржлрзЛрж▓рзНржбрж╛рж░ crete ржХрж░рждрзЗ рж╣ржмрзЗ finally рж╕рзЗржЗ ржлрзЛрж▓рзНржбрж╛рж░ ржП
  html ржлрж╛ржЗрж▓ ржмрж╛ template ржЧрзБрж▓рж╛ create ржХрж░рзЗ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗред html ржлрж╛ржЗрж▓ ржПрж░ ржкрж╛рже ржЕржмрж╢рзНржпржЗ
  appname/templates/appname/htmlfilename.html рж╣ржмрзЗ

app/templates/appname/htmlfilename.html

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple django themplate</title>
  </head>
  <body>
    <h1>Hi i am new to django welcome to django</h1>
  </body>
</html>
```

[ Now You are succesfully compleate "Startapp Basic view render" topic by following 5 step]

## Day 2: Templates, Static Files & URL Routing

- Base Template ржУ Template Inheritance

- Static Files (CSS, JS, Images)

- url, name, {% url %} tag

#### <рзз> Base Template ржУ Template Inheritance :

ржЖржЧрзЗрж░ ржжрж┐ржирзЗ ржЖржорж░рж╛ ржкрзЬрзЗржЫрж┐ ржпрзЗ ржЯрзЗржорзНржкрж▓рзЗржЯ ржмрж╛ html ржлрж╛ржЗрж▓ ржПрж░ path ржЕржмрж╢рзНржпржЗ app/template/app-name/htmlfilename.html
рж╣рждрзЗржЗ рж╣ржмрзЗред рж╕рзЗржнрж╛ржмрзЗ ржЖржорж░рж╛ html file ржмрж╛ django template banate ржкрж╛рж░рж┐ред django рждрзЗ html ржлрж╛ржЗрж▓ ржЧрзБрж▓рж╛ ржЖржорж░рж╛
ржбрзНржпрж╛ржЩрзНржЧ ржЯрзЗржорзНржкрж▓рзЗржЯ рж╣рж┐рж╕рж╛ржмрзЗ craete ржХрж░рж┐ рждрж╛ ржЖржорж░рж╛ ржЬрж╛ржирж┐редdjango templat ржП ржЕржирзЗржХ ржХрж┐ржЫрзБ ржмрж┐рж▓рзНржб ржЗржи syntex ржерж╛ржХрзЗ ржпрж╛
ржмрзЗрж╕рж┐ржХ html ржП ржерж╛ржХрзЗ ржирж╛ рждрж╛рж░ moddhe ржПржХржЯрж╛ ржУрзЯрж╛ржи ржЕржл ржЯрж┐ ржмрзЗрж╕рзНржЯ рж╕рж┐ржирзНржЯрзЗржХрзНрж╕ рж╣ржЪрзНржЫрзЗ template ржЗржирж╣рзЗрж░рж┐ржЯ ржПржмржВ ржЯрзЗржорзНржкрж▓рзЗржЯ
include ржЯрзЗржорзНржкрж▓рзЗржЯ ржЗржирж╣рзЗрж░рж┐ржЯ рж╣рж▓рзЛ ржХрзНрж▓рж╛рж╕ ржЗржирж╣рзЗрж░рж┐ржЯ ржПрж░ ржорждрзЛ ржЬрзЗржХ ржЗржирж╣рзЗрж░рж┐ржЯ ржХрж░ржмрзЗ рждрж╛рж░ рж╕ржмржХрж┐ржЫрзБ ржУржЦрж╛ржирзЗ ржкрж╛ржмрзЛ + ржЖржорж░рж╛ ржирж┐ржЪрзЗ
ржерзЗржХрзЗ ржЖрж░рзЛ ржХрж┐ржЫрзБ ржПрж▓рж┐ржорзЗржирзНржЯ ржЯрзНржпрж╛ржЧ use ржХрж░ржмрзЛред {% extends %} ржорзВрж▓ржд parent template ржерзЗржХрзЗ structure/inheritance
ржирзЗрзЯред ржПржЯрж╛ ржмрж▓рзЗ: "ржЖржорж┐ ржПржЗ template-ржПрж░ ржнрж┐рждрж░ ржмрж╕рзЗ ржирж┐ржЬрзЗрж░ content ржжрзЗржЦрж╛ржмрзЛред"

ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм?

ржпржЦржи рждрзБржорж┐ ржПржХржЯрж┐ base layout ржмрж╛ржирж┐рзЯрзЗ ржмрж┐ржнрж┐ржирзНржи ржкрзЗржЗржЬрзЗ ржПржХржЗ header, footer, navbar ржЗрждрзНржпрж╛ржжрж┐ рж░рж╛ржЦрждрзЗ ржЪрж╛ржУред

extendbase.html

```html
<!DOCTYPE html>
<html>
  <head>
    <title>{% block title %}My Website{% endblock %}</title>
  </head>
  <body>
    <header>Navbar</header>

    {% block content %} {% endblock %}

    <footer>Copyright ┬й</footer>
  </body>
</html>
```

home.html

```html
{% extends "base.html" %} {% block title %}Home Page{% endblock %} {% block content %}
<h1>Welcome to Home Page</h1>
{% endblock %}
```

include рж╣рж▓рзЛ php ржПрж░ ржЗржиржХрзНрж▓рзБржб ржПрж░ ржорждрзЛ ржмрж╛ sass ржПрж░ import ржПрж░ ржорждрзЛ {% include %} ржжрж┐рзЯрзЗ ржЕржирзНржп ржПржХржЯрж┐ ржЫрзЛржЯ template
ржлрж╛ржЗрж▓ржХрзЗ ржмрж░рзНрждржорж╛ржи ржлрж╛ржЗрж▓рзЗ ржЯрзБржХрж░рж╛ ржЕржВрж╢ рж╣рж┐рж╕рзЗржмрзЗ ржмрж╕рж╛ржирзЛ рж╣рзЯредржпржЦржи рждрзБржорж┐ ржПржХржЯрзБржХрж░рзЛ ржХрзЛржб (ржпрзЗржоржи: navbar, sidebar,
product_card) ржПржХрж╛ржзрж┐ржХ ржлрж╛ржЗрж▓рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржЪрж╛ржУред рждржЦржи include use ржХрж░ржмрзЛред

navbar.html

```html
<nav>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/about/">About</a></li>
  </ul>
</nav>
```

base.html

```html
<body>
  {% include "navbar.html" %} {% block content %}{% endblock %} {% include "footer.html" %}
</body>
```

include vs extend

| ржмрж┐рж╖рзЯ                       | `{% extends %}`                     | `{% include %}`                       |
| -------------------------- | ----------------------------------- | ------------------------------------- |
| ЁЯУЪ ржЙржжрзНржжрзЗрж╢рзНржп                | Template inherit (layout structure) | Template reuse (ржЫрзЛржЯ ржЕржВрж╢ ржЯрзБржХрж░рж╛)        |
| ЁЯПЧя╕П ржХрж╛ржЬ                     | base template ржерзЗржХрзЗ layout ржирзЗрзЯ       | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЕржВрж╢ ржЕржирзНржп template-ржП ржмрж╕рж╛рзЯ    |
| ЁЯУж ржмрзНржпржмрж╣рж╛рж░                 | page structure рждрзИрж░рж┐ ржХрж░рждрзЗ            | reusable section (navbar, card) ржмрж╕рж╛рждрзЗ |
| ЁЯУД base tag рж▓рж╛ржЧрзЗ           | рж╣рзНржпрж╛ржБ                               | ржирж╛                                    |
| ЁЯза Block system ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ | рж╣рзНржпрж╛ржБ (`{% block %}` ржжрж┐рзЯрзЗ)          | ржирж╛ (just ржмрж╕рж╛рзЯ)                        |

#### <рзи> Static Files (CSS, JS, Images)

Django-рждрзЗ Static Folder ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржорзВрж▓ ржХрж╛рж░ржгЁЯФ╣

тЬЕ Path ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛ рж╕рж╣ржЬ ржУ ржирж┐рж░рж╛ржкржж рждрзБржорж┐ ржпржжрж┐ рж╕рж░рж╛рж╕рж░рж┐ ржПржоржи рж▓рж┐ржЦрзЛ:

```html
<link rel="stylesheet" href="css/style.css" />
```

рждрж╛рж╣рж▓рзЗ Django ржмрзБржЭржмрзЗржЗ ржирж╛ тАФ ржПржЗ ржлрж╛ржЗрж▓ ржХрзЛржерж╛рзЯ ржЖржЫрзЗред

ржХрж┐ржирзНрждрзБ рждрзБржорж┐ ржпржжрж┐ рж▓рж┐ржЦрзЛ:

```html
<link rel="stylesheet" href="{% static 'css/style.css' %}" />
```

Django ржирж┐ржЬрзЗржЗ ржмрзБржЭрзЗ ржпрж╛ржмрзЗ тАФ ржлрж╛ржЗрж▓ржЯрж╛ ржХрзЛржерж╛рзЯ ржЖржЫрзЗ, ржХрж┐ржнрж╛ржмрзЗ serve ржХрж░рждрзЗ рж╣ржмрзЗ, ржПржмржВ ржбрж┐ржкрзНрж▓рзЯржорзЗржирзНржЯрзЗ ржХрзАржнрж╛ржмрзЗ handle
ржХрж░рждрзЗ рж╣ржмрзЗред

тЬЕ ржбрж┐ржкрзНрж▓рзЯржорзЗржирзНржЯрзЗ ржХрж╛ржЬ ржХрж░рзЗ

рж╕рзЛржЬрж╛ ржХржерж╛рзЯ, Django production mode (live server) ржП рждрзЛржорж╛рж░ static file serve ржХрж░ржмрзЗ ржирж╛ ржпржжрж┐ рждрзБржорж┐
{% static %} ржмрзНржпржмрж╣рж╛рж░ ржирж╛ ржХрж░рзЛред

ржбрж┐ржкрзНрж▓рзЯржорзЗржирзНржЯрзЗ Django ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржб ржжрж┐рзЯрзЗ static ржлрж╛ржЗрж▓ ржПржХ ржЬрж╛рзЯржЧрж╛рзЯ ржирж┐рзЯрзЗ ржирзЗрзЯ:

```
python manage.py collectstatic
```

ржПржЯрж╛ рждржЦржи рж╕ржм static ржлрж╛ржЗрж▓ STATIC_ROOT ржП рж░рж╛ржЦрзЗ тАФ ржпрж╛рждрзЗ nginx/gunicorn serve ржХрж░рждрзЗ ржкрж╛рж░рзЗред

тЬЕ Multiple app ржПрж░ ржоржзрзНржпрзЗ ржлрж╛ржЗрж▓ conflict ржерзЗржХрзЗ рж░ржХрзНрж╖рж╛ ржХрж░рзЗ ржзрж░рзЛ рждрзЛржорж╛рж░ рзиржЯрж╛ app:

blog

shop

ржжрзБржЯрзЛрждрзЗржЗ style.css ржЖржЫрзЗред рждрзБржорж┐ ржпржжрж┐ static folder use ржирж╛ ржХрж░рзЛ, рждрж╛рж╣рж▓рзЗ ржХрзЛржиржЯрж╛ ржХрзЛржиржЯрж╛рж░ ржлрж╛ржЗрж▓ тАФ Django ржЬрж╛ржиржмрзЗ ржирж╛ред

ржХрж┐ржирзНрждрзБ рждрзБржорж┐ ржпржжрж┐ app-ржнрж┐рждрзНрждрж┐ржХ static рж░рж╛ржЦрзЛ: blog/static/blog/style.css shop/static/shop/style.css рждрж╛рж╣рж▓рзЗ
Django ржкрж░рж┐рж╖рзНржХрж╛рж░ ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЗ ржХрзЛржиржЯрж╛ ржХрж╛рж░ред

blog рж╣рж▓рзЛ app ржЖрж░ ржПрж░ ржнрж┐рждрж░ static ржЯрж╛ рж╣рж▓рзЛ app static ржЖрж░ ржкрзНрж░ржЬрзЗржХрзНржЯ ржПрж░ ржнрж┐рждрж░ static ржЯрж╛ рж╣рж▓рзЛ project рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ
ржПржЯрж╛ ржЧрзНрж▓рзЛржмрж╛рж▓ whole app ржПрж░ ржЬржирзНржп ржХрж░ржмрзЗред

тЬЕ Django-рждрзЗ Static File ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп ржХрж░ржгрзАрзЯ ЁЯФ╢ Step 1: settings.py ржП Static ржПрж░ config

python settings.py

```
STATIC_URL = '/static/'
```

ржЙржирзНржиржд ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп (optional ржХрж┐ржирзНрждрзБ ржнрж╛рж▓рзЛ)

```
STATICFILES_DIRS = [
   BASE_DIR / "static",
]
```

ЁЯФ╢ Step 2: Project ржлрзЛрж▓рзНржбрж╛рж░рзЗ static/ ржирж╛ржорзЗрж░ ржлрзЛрж▓рзНржбрж╛рж░ ржмрж╛ржирж╛ржУ

```
your_project/
тФЬтФАтФА manage.py
тФЬтФАтФА your_app/
тФЬтФАтФА static/
тФВ   тФЬтФАтФА css/
тФВ   тФЬтФАтФА js/
тФВ   тФЬтФАтФА images/
```

ЁЯСЙ ржПржЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржнрж┐рждрж░рзЗ CSS/JS/Image рж░рж╛ржЦрзЛ

ЁЯФ╢ Step 3: Template ржлрж╛ржЗрж▓рзЗрж░ рж╢рзБрж░рзБрждрзЗ {% load static %} ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ

```
{% load static %}
```

ЁЯФ╢ Step 4: Static Files рж▓рж┐ржВржХ ржХрж░рзЛ {% static %} ржЯрзНржпрж╛ржЧ ржжрж┐рзЯрзЗ тЬЕ CSS ржлрж╛ржЗрж▓:

```html
<link rel="stylesheet" href="{% static 'css/style.css' %}" />
```

тЬЕ JS ржлрж╛ржЗрж▓:

```html
<script src="{% static 'js/main.js' %}"></script>
```

тЬЕ Image ржлрж╛ржЗрж▓:

```html
<img src="{% static 'images/banner.jpg' %}" alt="Banner" />
```

ржлрзБрж▓ html

```html
{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>My Website</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  </head>
  <body>
    <h1>Welcome</h1>
    <img src="{% static 'images/logo.png' %}" alt="Logo" />

    <script src="{% static 'js/app.js' %}"></script>
  </body>
</html>
```

structure

```
project/
тФЬтФАтФА static/
тФВ   тФФтФАтФА css/
тФВ       тФФтФАтФА global.css
тФЬтФАтФА blog/
тФВ   тФФтФАтФА static/
тФВ       тФФтФАтФА blog/
тФВ           тФФтФАтФА blog.css
```

blog/template/blog/htmlname.html

```html
{% load static %}
<link rel="stylesheet" href="{% static 'css/global.css' %}" />
<link rel="stylesheet" href="{% static 'blog/blog.css' %}" />
```

тЭЧ ржпржжрж┐ static ржХрж╛ржЬ ржирж╛ ржХрж░рзЗ:

тЬЕ рзз. settings.py ржП STATICFILES_DIRS ржЖржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрзЛ

тЬЕ рзи. template ржлрж╛ржЗрж▓рзЗ {% load static %} ржжрзЗрзЯрж╛ рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛

тЬЕ рзй. ржлрж╛ржЗрж▓ path ржнрзБрж▓ ржЖржЫрзЗ ржХрж┐ржирж╛ (рж╕ржм ржЫрзЛржЯ рж╣рж╛рждрзЗрж░ рж╣рж▓рзЗ ржнрж╛рж▓рзЛ рж╣рзЯ)

тЬЕ рзк. Django server ржЪрж╛рж▓рзБ ржЖржЫрзЗ ржХрж┐ржирж╛ python manage.py runserver

#### Some FAQ FOR STATIC FOLDER

| ржкрзНрж░рж╢рзНржи                          | ржЙрждрзНрждрж░                                                        |
| ------------------------------- | ------------------------------------------------------------ |
| Static folder ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЛ? | Django static file serve ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржУ ржбрж┐ржкрзНрж▓рзЯржорзЗржирзНржЯрзЗ рж╕ржВржЧрзНрж░рж╣ ржХрж░рзЗ |
| рж╕рж░рж╛рж╕рж░рж┐ path ржжрж┐рж▓рзЗржЗ рж╣рзЯ ржирж╛?        | рж╣рзЯ ржирж╛ тАФ Django serve ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛                           |
| ржХржЦржи app-static рж░рж╛ржЦржмрзЛ?           | ржпржЦржи file рж╢рзБржзрзБржорж╛рждрзНрж░ ржУржЗ app ржПрж░ ржоржзрзНржпрзЗ ржмрзНржпржмрж╣рзГржд                   |
| ржХржЦржи project-static рж░рж╛ржЦржмрзЛ?       | ржпржЦржи file global/base layout ржП ржмрзНржпржмрж╣рзГржд рж╣рзЯ                     |
| Static file auto serve рж╣рзЯ ржХржЦржи?  | development mode ржП, debug=True рж╣рж▓рзЗ                           |

                        |

### <рзй> url, name, {% url %} tag

ЁЯза рзз. url ржХрж┐? url ржЕрж░рзНрже рж╣ржЪрзНржЫрзЗ тАФ Django-ржПрж░ рж░рж╛ржЙржЯрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржоред ржПржЗ рж░рж╛ржЙржЯ ржжрж┐рзЯрзЗ Django ржмрзЛржЭрзЗ ржХрзЛржи view ржлрж╛ржВрж╢ржи ржХрзЛржи
path ржмрж╛ address ржП ржЪрж▓ржмрзЗред

ЁЯза рзи. name ржХрж┐? Django-рждрзЗ url pattern-ржП name ржжрж┐рж▓рзЗ рждрзБржорж┐ ржР URL ржЯрж╛ ржЯрзЗржоржкрзНрж▓рзЗржЯ, рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржмрж╛ рж░рж┐ржнрж╛рж░рзНрж╕ ржХрж░рж╛рж░
рж╕ржорзЯ ржирж╛ржо ржжрж┐рзЯрзЗ access ржХрж░рждрзЗ ржкрж╛рж░рзЛред

ЁЯСЙ рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрж▓рж▓рзЗ: name рж╣рж▓рзЛ url ржПрж░ nickname ржпрзЗржЯрж╛ ржжрж┐рзЯрзЗ {% url %} ржЯрзНржпрж╛ржЧ, reverse(), redirect() ржЗрждрзНржпрж╛ржжрж┐рждрзЗ
ржХрж╛ржЬ ржХрж░рж╛ ржпрж╛рзЯред

ЁЯФЦ рзй. {% url %} template tag ЁЯСЙ ржЯрзЗржоржкрзНрж▓рзЗржЯрзЗрж░ ржнрзЗрждрж░рзЗ href ржмрж╛ рж▓рж┐ржВржХрзЗрж░ ржнрж┐рждрж░рзЗ name ржжрж┐рзЯрзЗ URL generate ржХрж░рждрзЗ
ржмрзНржпржмрж╣рзГржд рж╣рзЯред

```
{% url 'url_name' %}
```

тЬЕ step рзз

```python
# myapp/urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('', views.home, name='home'),
    path('about/', views.about, name='about_page'),
    path('contact/<int:id>/', views.contact, name='contact_page'),
]
```

тЬЕ step рзи

```python
# myapp/views.py

from django.http import HttpResponse

def home(request):
    return HttpResponse("This is Home Page")

def about(request):
    return HttpResponse("About Page")

def contact(request, id):
    return HttpResponse(f"Contact Page of ID: {id}")
```

тЬЕ step рзй Template file (HTML)

```html
{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>Navigation</title>
  </head>
  <body>
    <!-- Static URL (not recommended) -->
    <a href="/about/">About</a>

    <!-- Dynamic URL (recommended) -->
    <a href="{% url 'about_page' %}">About</a>

    <!-- URL with dynamic parameter -->
    <a href="{% url 'contact_page' 5 %}">Contact ID 5</a>
  </body>
</html>
```

ЁЯУЭ Syntax:

| ржХрж╛ржЬ                | Syntax                                             |
| ------------------ | -------------------------------------------------- |
| рж╕рж┐ржорзНржкрж▓ URL         | `{% url 'name' %}`                                 |
| ржнрзЗрж░рж┐рзЯрзЗржмрж▓ рж╕рж╣        | `{% url 'name' variable %}`                        |
| ржПржХрж╛ржзрж┐ржХ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ | `{% url 'name' param1 param2 %}`                   |
| with keyword args  | `{% url 'name' id=5 %}` _(if view accepts kwargs)_ |

тЬЕ ржХрзЗржи {% url %} ржЯрзНржпрж╛ржЧ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм?

| ржХрж╛рж░ржг               | ржмрзНржпрж╛ржЦрзНржпрж╛                                       |
| ------------------ | ---------------------------------------------- |
| тЬЕ Maintainability | URL path ржмржжрж▓ рж╣рж▓рзЗржУ template ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣рзЯ ржирж╛ |
| тЬЕ DRY Principle   | ржПржХ ржЬрж╛рзЯржЧрж╛рзЯ ржирж╛ржо ржжрж┐рж▓рзЗ рж╕ржм ржЬрж╛рзЯржЧрж╛рзЯ ржХрж╛ржЬ рж╣рзЯ            |
| тЬЕ Error free      | Hardcoded path рж▓рж┐ржЦрж▓рзЗ ржнрзБрж▓ рж╣ржУрзЯрж╛рж░ рж╕ржорзНржнрж╛ржмржирж╛ ржмрзЗрж╢рж┐   |
| тЬЕ Dynamic Routing | ID / slug / username ржЗрждрзНржпрж╛ржжрж┐ рж╕рж╣ржЬрзЗ ржмрж╕рж╛ржирзЛ ржпрж╛рзЯ    |

ЁЯзк ржЙржжрж╛рж╣рж░ржг (Dynamic Routing)

```python

# urls.py
path('user/<int:id>/', views.user_profile, name='user_profile')
#views.py:
def user_profile(request, id):
    return HttpResponse(f"User ID: {id}")
```

```html
<!-- template.html: -->
<a href="{% url 'user_profile' 42 %}">User 42</a>
```

ЁЯФБ View ржерзЗржХрзЗ URL reverse ржХрж░рж╛рж░ ржЬржирзНржп:

```python
from django.urls import reverse
reverse('user_profile', args=[42])
```

тЬЕ Shortcut: redirect('name', args=[id])

```python
from django.shortcuts import redirect
return redirect('user_profile', id=5)
```

Common mistake

| ржнрзБрж▓                                  | ржХрж╛рж░ржг                                             |
| ------------------------------------ | ------------------------------------------------ |
| `{% url home %}` тЖТ тЭМ                | ржХрзЛржЯрзЗрж╢ржи ржЫрж╛рзЬрж╛ рж▓рзЗржЦрж╛ ржпрж╛ржмрзЗ ржирж╛                         |
| `{% url 'contact_page' %}` тЖТ тЬЕ      | Always use quotes                                |
| `{% url 'contact_page' id=5 %}` тЖТ тЬЕ | keyword argument ржжрж┐рж▓рзЗ ржЕржмрж╢рзНржпржЗ ржирж╛ржо ржУ ржорж╛ржи рж▓рж┐ржЦрждрзЗ рж╣ржмрзЗ |

ржлрж╛ржЗржирж╛рж▓ рж░рж┐ржнрж┐рж╢ржи

```python
URL Pattern:
path('route/', views.function, name='route_name')

Template Usage:
{% url 'route_name' %} тЖТ for simple URL
{% url 'route_name' id %} тЖТ for dynamic URL

```

Bonus Tip: include() + name-spacing or app_name

```python
# project/urls.py
from . import views
app_name="home"
urlpatterns = [
    path('blog/', include('blog.urls', namespace='blog')),
    path('blog/',views.navbar,name="nav"),
]

```

```html
{% url 'blog:post_detail' 1 %} {% url 'home:nav'%}
```

## тЬЕ Day 3: Models & Admin Panel

1.models.Model ржжрж┐рзЯрзЗ DB Table рждрзИрж░рж┐

2.makemigrations, migrate

3.Django Admin setup

4.Admin ржерзЗржХрзЗ ржбрж╛ржЯрж╛ Insert/Update/Delete

$ ржирж┐ржЪрзЗрж░ ржПржЗ рзл ржЯрж┐ step ржлрж▓рзЛ ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЖржорж░рж╛ ржПржЗ рзк ржЯрж┐ ржЯржкрж┐ржХ ржЖрзЯрждрзНржд ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛ ред ржПржЦрж╛ржирзЗ ржкрзНрж░рждрж┐ржЯрж╛ рж╕рзНржЯрзЗржк ржЦрзБржм
рж╕рзБржирзНржжрж░ ржХрж░рзЗ explain ржХрж░рж╛ рж╣рж▓рзЛред

ЁЯУМ Step 1: models.py ржлрж╛ржЗрж▓рзЗ Table (Model) Define ржХрж░рзБржи ЁЯСЙ myapp/models.py ржлрж╛ржЗрж▓рзЗ ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рзБржи
ржпрзЗржЯрж╛ models.Model ржерзЗржХрзЗ ржЗржирж╣рзЗрж░рж┐ржЯ ржХрж░рзЗ:

from django.db import models

```python
class Student(models.Model):
    name = models.CharField(max_length=100)
    age = models.IntegerField()
    email = models.EmailField(unique=True)
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return self.name
```

| рж▓рж╛ржЗржи                          | ржмрзНржпрж╛ржЦрзНржпрж╛                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `class Student(models.Model)` | Student ржирж╛ржорзЗ ржЯрзЗржмрж┐рж▓ рж╣ржмрзЗ (ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ `myapp_student`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `CharField`                   | рж╕рзНржЯрзНрж░рж┐ржВ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп (ржорзНржпрж╛ржХрзНрж╕ рж▓рзЗржирзНрже ржжрж┐рждрзЗ рж╣рзЯ)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `IntegerField`                | рж╕ржВржЦрзНржпрж╛ рж░рж╛ржЦрзЗ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `EmailField`                  | ржЗржорзЗржЗрж▓ ржлрж┐рж▓рзНржб, рж╕рж╛ржерзЗ unique=true ржорж╛ржирзЗ ржПржХржЗ ржЗржорзЗржЗрж▓ рзи ржмрж╛рж░ рж░рж╛ржЦрж╛ ржпрж╛ржмрзЗ ржирж╛                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `auto_now_add=True`           | ржПржХржмрж╛рж░ object рждрзИрж░рж┐ рж╣рж▓рзЗ ржЕржЯрзЛржорзЗржЯрж┐ржХ рж╕ржорзЯ ржпрзЛржЧ рж╣ржмрзЗ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `__str__()`                   | ржЕрзНржпрж╛ржбржорж┐ржи ржмрж╛ ржЯрзЗржоржкрзНрж▓рзЗржЯрзЗ рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржирж╛ржоредржпржЦржи ржЖржорж░рж╛ sql ржП group by ржПржЯрж╛ ржжрж┐рзЯрж╛ ржЯрзЗржмрж┐рж▓ ржХрзЗ ржХрзЛржи colum ржПрж░ ржнрж┐рждрзНрждрж┐рждрзЗ group ржХрж░рж┐ рждржЦржи ржПржХрж╛ржзрж┐ржХ raw ржмрж╛ table ржЕржмржЬрзЗржХрзНржЯ ржПржХржЯрж╛ ржЕржмржЬрзЗржХрзНржЯ raw ржП ржХржиржнрж╛рж░рзНржЯ рж╣рзЯред рждржЦржи ржУржЗ merge raw te ржХрж┐ржирзНрждрзБ ржЖржорж░рж╛ ржкрзНрж░рждрж┐ржЯрж╛ mergekrito ржХрж▓рж╛ржо ржХрзЗ рж╣рж╛ржЗрж▓рж╛ржЗржЯ ржХрж░рж╛рж░ ржЬржирзНржп count(colum),max (colum ),average (colum) asb use ржХрж░рж┐ Jen ржПржХржЯрж╛ ржнрзНржпрж╛рж▓рзБ ржжрж┐рзЯрж╛ ржкрзБрж░рж╛ ржорж╛рж░рзНржЬ рж╣рзЯ ржХрж╛рж▓рж╛ржо рж╣рж╛ржЗрж▓рж╛ржЗржЯ рж╣рзЯ . рждрзЗржоржирж┐ ржпржЦржи ржПржХржЯрж╛ raw ржмрж╛ ржЕржмржЬрзЗржХрзНржЯ ржХрзЗ ржЖржорж░рж╛ mean ржХрж░рж┐ django рждрзЗ tokhon ржУржЗ ржЕржмржЬрзЗржХрзНржЯ ржПрж░ рж╕ржм ржХрж╛рж▓рж╛ржо ржПрж░ ржирж╛ржо рждрзЛ ржмрж▓рж╛ рж╕ржорзНржнржм рж╣рзЯ ржирж╛ ржУржЗ ржкрзБрж░рж╛ ржЕржмржЬрзЗржХрзНржЯ рждрж╛ржХрзЗ ржПржХржЯрж╛ colum ржжрж┐рзЯрж╛ ржорж┐ржи ржХрж░рждрзЗ рж╣рзЯ рж╕рзЛ ржУржЗ ржЯрзЗржмрж┐рж▓ ржЯрж╛ ржХрзЗ ржХрзЛржи colum ржПрж░ ржнрзНржпрж╛рж▓рзБ ржжрж┐рзЯрж╛ рж╣рж╛ржЗрж▓рж╛ржЗржЯ ржХрж░ржмрзЛ рждрж╛ ржПржЗ **str** ржбрж╛ржирзНржбрж╛рж░ ржорзЗржержб ржП рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рждрзЗ рж╣рзЯред |

#### ЁЯУМ Step 2: Model Change ржПрж░ ржкрж░ makemigrations ржЪрж╛рж▓рж╛ржи

```bash
python manage.py makemigrations
```

ЁЯФ╣ ржХрж╛рж░ржг: ржПржЯрж╛ Django ржХрзЗ ржмрж▓рзЗ, тАЬржЖржорж╛рж░ ржоржбрзЗрж▓рзЗ ржкрж░рж┐ржмрж░рзНрждржи ржПрж╕рзЗржЫрзЗ, ржПржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи ржлрж╛ржЗрж▓ ржмрж╛ржирж╛ржУредтАЭ

#### ЁЯУМ Step 3: ржбрзЗржЯрж╛ржмрзЗржЬрзЗ ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐рж░ ржЬржирзНржп migrate ржЪрж╛рж▓рж╛ржи

```bash
python manage.py migrate
```

ЁЯФ╣ ржХрж╛рж░ржг: ржПржЯрж╛ ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи ржлрж╛ржЗрж▓ ржжрзЗржЦрзЗ ржЖрж╕рж▓ ржбрзЗржЯрж╛ржмрзЗржЗрж╕рзЗ ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐ ржХрж░рзЗред database ржХрзЗ migrate ржорж╛ржирзЗ ржЖржкржЧрзНрж░рзЗржб ржХрж░рзЗред

#### ЁЯУМ Step 4: Admin Panel-ржП ржжрзЗржЦрждрзЗ ржЪрж╛ржЗрж▓рзЗ, Admin-ржП рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рзБржи

ЁЯСЙ myapp/admin.py:

```python
from django.contrib import admin
from .models import Student

admin.site.register(Student)

```

ЁЯФ╣ ржХрж╛рж░ржг: ржПржЯрж╛ ржХрж░рж▓рзЗ Django Admin panel-ржП Student ржоржбрзЗрж▓ржЯрж┐ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи ржПржмржВ Create/Update ржорж╛ржирзЗ CRUD
ржЕржкрж╛рж░рзЗрж╢ржи ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЗржи django ржЕрзНржпрж╛ржбржорж┐ржи ржПрж░ ржорж╛ржзрзНржпржорзЗред

ЁЯУМ Step 5: рж╕рзБржкрж╛рж░ ржЗржЙржЬрж╛рж░ рждрзИрж░рж┐ ржХрж░рзБржи (admin panel ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп)

```bash
python manage.py createsuperuser
```

ЁЯСЙ рждрж╛рж░ржкрж░ рж▓ржЧржЗржи ржХрж░рзБржи:

```arduino
http://127.0.0.1:8000/admin
```

ЁЯФ╣ ржХрж╛рж░ржг: Admin Panel ржЪрж╛рж▓рж╛рждрзЗ ржПржХржЬржи superuser рж▓рж╛ржЧрзЗредржЖрж░ ржПржнрж╛ржмрзЗ ржПржХржЬржи ржЕрзНржпрж╛ржбржорж┐ржи ржорж╛ржирзЗ super ржЗржЙрж╕рж╛рж░ create ржХрж░рждрзЗ
рж╣рзЯ ржпрзЗ ржХрж┐ржирж╛ ржкрзБрж░рж╛ ржУрзЯрзЗржм app ржЯрж╛ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░ржмрзЗред ржПржЗ app ржПрж░ ржХрждрзГржкржХрзНрж╖ред

#### ЁЯза Django Admin Registration with modeladmin(custom configaretion)

ЁЯСЙ ржжрзБржЗржнрж╛ржмрзЗ Model Admin рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ:

##### ЁЯФ╖ рзз. admin.site.register() тАУ ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ? (Traditional way)

```python
from django.contrib import admin
from .models import Product

class ProductAdmin(admin.ModelAdmin):
    pass

admin.site.register(Product, ProductAdmin)
#admin.site.register(model, modeladmin=None)
```

тЮд Required ржУ Optional Part:

| Argument     | ржкрзНрж░рзЯрзЛржЬржирзАрзЯ?  | ржмрзНржпрж╛ржЦрзНржпрж╛                                                                                       |
| ------------ | ----------- | ---------------------------------------------------------------------------------------------- |
| `model`      | тЬЕ Required | ржХрзЛржи Model ржЯрж╛ржХрзЗ admin ржкрзНржпрж╛ржирзЗрж▓рзЗ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░ржЫрзЛ                                                   |
| `modeladmin` | тЭМ Optional | ржУржЗ ржоржбрзЗрж▓рзЗрж░ ржЬржирзНржп ржХрж╛рж╕рзНржЯржо `ModelAdmin` ржХрзНрж▓рж╛рж╕ ржжрж┐рж▓рзЗ ржПржЯрж╛ ржжрж┐рждрзЗ рж╣рзЯ, ржирж╛ ржжрж┐рж▓рзЗ default settings ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ |

тЮд ржХрж╛ржЬрзЗрж░ ржзрж░ржи: Django ржПрж░ Admin ржкрзНржпрж╛ржирзЗрж▓рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж╛ Model ржпрзБржХрзНржд ржХрж░рзЗред

ржпржжрж┐ modeladmin ржирж╛ ржжрж╛ржУ, рждрж╛рж╣рж▓рзЗ Django ModelAdmin ржПрж░ default behavior ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

ЁЯФ╖ рзи. @admin.register(Model) тАУ ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

```python
@admin.register(Model)
class MyModelAdmin(admin.ModelAdmin):
    ...
```

тЮд ржХрж╛ржЬрзЗрж░ ржзрж░ржи:

- ржПржЯрж┐ ржорзВрж▓ржд admin.site.register() ржПрж░ рж╢рж░рзНржЯржХрж╛ржЯред

- ржбрзЗржХрзЛрж░рзЗржЯрж░ рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ, ржоржбрзЗрж▓ ржПржмржВ ModelAdmin ржХрзНрж▓рж╛рж╕ржХрзЗ ржПржХрждрзНрж░ ржХрж░рзЗред admin.register(model) ржПржХржЯрж╛
  ржбрзЗржХрзЛрж░рзЗржЯрж░ function рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ рж╕рзЗржЗ decorator ржлрж╛ржЩрзНржХрж╢ржи ржЖржмрж╛рж░ modeladmin paramitar рж╣рж┐рж╕рж╛ржмрзЗ ржирзЗрзЯ ржПржмржВ ржУржЗ
  ржоржбрзЗрж▓ ржЕрзНржпрж╛ржбржорж┐ржи class ржЕржирзБржпрж╛рзЯрзА ржУржЗ ржоржбрзЗрж▓ ржПрж░ ржЬржирзНржп ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓ ржП ржХрж╛рж╕рзНржЯржо ржнрж┐ржЙ configer ржХрж░рзЗред

cleaner, DRY (Don't Repeat Yourself) style.

тЮд Example:

```python
from django.contrib import admin
from .models import Product

@admin.register(Product)
class ProductAdmin(admin.ModelAdmin):
    list_display = ('name', 'price')
```

тЬЕ ржПржЯрж╛ржУ admin.site.register(Product, ProductAdmin) ржПрж░ ржорждрзЛржЗ ржХрж╛ржЬ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ ржПржХрж╕рж╛ржерзЗ рж▓рж┐ржЦрзЗ ржлрзЗрж▓рж╛ ржпрж╛рзЯред

ЁЯФБ admin.site.register() vs @admin.register() тАУ рждрзБрж▓ржирж╛: | ржмрж┐рж╖рзЯ | `admin.site.register()` |
`@admin.register()` | | ----------- | --------------------------------- |
---------------------------- | | ржкржжрзНржзрждрж┐ | Function call | Decorator | | ржХрзЛржбрзЗрж░ ржзрж░ржи | ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛
ржХрзНрж▓рж╛рж╕ ржУ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи | ржПржХржЗ ржЬрж╛рзЯржЧрж╛рзЯ рж╕ржм | | ржкрж░рж┐ржЪрзНржЫржирзНржирждрж╛ | ржПржХржЯрзБ рж▓ржорзНржмрж╛ рж╣рзЯ | Clean & Compact | | ржкрзНрж░рзЯрзЛржЬржи |
ржпржЦржи dynamic ржнрж╛ржмрзЗ register ржХрж░рждрзЗ рж╣рзЯ | ржпржЦржи statically register ржХрж░ржЫрзЛ |

ЁЯЯй Suggestion:

ржпржжрж┐ ржЕржирзЗржХржЧрзБрж▓рзЛ ржоржбрзЗрж▓ ржПржХрж╕рж╛ржерзЗ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рждрзЗ рж╣рзЯ ржмрж╛ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ ModelAdmin ржХрзНрж▓рж╛рж╕ рж▓рж╛ржЧржмрзЗ, рждрж╛рж╣рж▓рзЗ
admin.site.register() ржнрж╛рж▓рзЛред ржпржжрж┐ ржПржХржЯрж┐ ржоржбрзЗрж▓ ржУ ржПржХржЯрж┐ ModelAdmin рж╣рзЯ, рждрж╛рж╣рж▓рзЗ @admin.register() ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛред

ЁЯзй ModelAdmin ржХрзНрж▓рж╛рж╕ ржХрзА ржХрж░рзЗ? ModelAdmin рж╣рж▓ Django Admin panel-ржПрж░ ржЬржирзНржп ржХрж╛рж╕рзНржЯржорж╛ржЗржЬрзЗрж╢ржи ржХрзНрж▓рж╛рж╕ред ржПржЯрж╛ ржжрж┐рзЯрзЗржЗ
рждрзБржорж┐ Admin interface ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рзЛред

ЁЯОп ржХрж╛ржЬрзЗрж░ рждрж╛рж▓рж┐ржХрж╛:

| Attribute                                 | ржХрж╛ржЬ                                   |
| ----------------------------------------- | ------------------------------------- |
| `list_display`                            | рж▓рж┐рж╕рзНржЯ ржкрзЗржЗржЬрзЗ ржлрж┐рж▓рзНржб ржжрзЗржЦрж╛рзЯ               |
| `list_display_links`                      | ржХрзЛржи ржлрж┐рж▓рзНржбрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ edit ржкрзЗржЗржЬрзЗ ржпрж╛ржмрзЗ |
| `readonly_fields`                         | рж╢рзБржзрзБ ржжрзЗржЦрж╛ржмрзЗ, edit ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛         |
| `search_fields`                           | рж╕рж╛рж░рзНржЪржмрж╛рж░рзЗ ржХрзЛржи ржлрж┐рж▓рзНржб ржжрж┐рзЯрзЗ ржЦрзБржБржЬржмрзЗ       |
| `list_filter`                             | рж╕рж╛ржЗржбржмрж╛рж░рзЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржЕржкрж╢ржи                 |
| `ordering`                                | ржХрзЛржи ржХрзНрж░ржорзЗ ржжрзЗржЦрж╛ржмрзЗ (ASC/DESC)           |
| `admin.site.register(model, admin_class)` | ржХрзНрж▓рж╛рж╕рж┐ржХ ржкржжрзНржзрждрж┐                        |
| `@admin.register(model)`                  | ржбрзЗржХрзЛрж░рзЗржЯрж░ ржкржжрзНржзрждрж┐ (cleaner)             |

ржЙржжрж╛рж╣рж░ржг:

```python
@admin.register(Product)
class ProductAdmin(admin.ModelAdmin):
    list_display = ('name', 'price', 'created_at', 'updated_at')
    list_display_links = ('name',)
    readonly_fields = ('created_at', 'updated_at')
    search_fields = ('name', 'description')
    list_filter = ('created_at',)
    ordering = ('-created_at',)
```

ЁЯТб ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржХрзМрж╢рж▓ (Shortcut Summary)

```pgsql
admin.site.register(Model, AdminClass)
тЮбя╕П рж╕рж╛ржзрж╛рж░ржг ржкржжрзНржзрждрж┐, ржмрзЬ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржмрзЗрж╢рж┐ ржжрж░ржХрж╛рж░ рж╣рзЯ

@admin.register(Model)
тЮбя╕П рж╢рж░рзНржЯржХрж╛ржЯ ржбрзЗржХрзЛрж░рзЗржЯрж░, ржЫрзЛржЯ ржХрзЛржбрзЗ clean рж▓рзЗржЦрж╛ ржпрж╛рзЯ

ModelAdmin
тЮбя╕П admin panel ржП ржХрж╛рж╕рзНржЯржорж╛ржЗржЬрзЗрж╢ржи ржХрж░рждрзЗ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ

ModelAdmin ржП ржпрзЗржЧрзБрж▓рзЛ ржоржирзЗ рж░рж╛ржЦржм:
тЬЕ list_display       тЖТ ржХрзЛржи ржлрж┐рж▓рзНржб рж▓рж┐рж╕рзНржЯрзЗ ржжрзЗржЦрж╛ржмрзЛ
тЬЕ list_display_links тЖТ ржХрзЛржиржЯрж╛ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ edit e ржпрж╛ржмрзЗ
тЬЕ readonly_fields    тЖТ ржХрзЛржиржЯрж╛ edit ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛
тЬЕ search_fields      тЖТ ржХрзЛржи ржлрж┐рж▓рзНржб ржжрж┐рзЯрзЗ рж╕рж╛рж░рзНржЪ рж╣ржмрзЗ
тЬЕ list_filter        тЖТ ржХрзЛржи ржлрж┐рж▓рзНржбрзЗ ржлрж┐рж▓рзНржЯрж╛рж░
тЬЕ ordering           тЖТ ржХрзЛржи ржлрж┐рж▓рзНржбрзЗ рж╕рж╛ржЬрж╛ржмрзЗ
```

тЬЕ ржЕрждрж┐рж░рж┐ржХрзНржд ржХрж┐ржЫрзБ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржоржбрзЗрж▓ ржлрж┐рж▓рзНржб ржУ рждрж╛ржжрзЗрж░ ржХрж╛ржЬ:

| Field                              | ржХрж╛ржЬ                  |
| ---------------------------------- | -------------------- |
| `CharField(max_length=...)`        | ржЯрзЗржХрзНрж╕ржЯ рж░рж╛ржЦрзЗ          |
| `TextField()`                      | ржмрзЬ ржЯрзЗржХрзНрж╕ржЯ рж░рж╛ржЦрзЗ       |
| `IntegerField()`                   | рж╕ржВржЦрзНржпрж╛ рж░рж╛ржЦрзЗ          |
| `FloatField()`                     | ржжрж╢ржорж┐ржХ рж╕ржВржЦрзНржпрж╛         |
| `BooleanField()`                   | True/False           |
| `EmailField()`                     | ржЗржорзЗржЗрж▓ рж░рж╛ржЦрзЗ           |
| `DateTimeField(auto_now_add=True)` | рждрзИрж░рж┐ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ       |
| `DateTimeField(auto_now=True)`     | ржкрзНрж░рждрж┐ржмрж╛рж░ ржЖржкржбрзЗржЯрзЗрж░ рж╕ржорзЯ |

ЁЯУБ ржлрзЛрж▓рзНржбрж╛рж░ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ (рж╕ржВржХрзНрж╖рзЗржкрзЗ)

```pgsql
myproject/
тФЬтФАтФА manage.py
тФЬтФАтФА myproject/
тФВ   тФФтФАтФА settings.py
тФЬтФАтФА myapp/
тФВ   тФЬтФАтФА models.py       тЖР ржоржбрзЗрж▓ ржлрж╛ржЗрж▓
тФВ   тФЬтФАтФА admin.py        тЖР ржЕрзНржпрж╛ржбржорж┐ржирзЗ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░
тФВ   тФФтФАтФА migrations/
```

ЁЯза ржоржирзЗ рж░рж╛ржЦржмрзЗржи:

- models.Model ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржкржирж┐ Python ржХрзНрж▓рж╛рж╕ ржжрж┐рзЯрзЗ SQL ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

- ржкрзНрж░рждрж┐ржмрж╛рж░ ржоржбрзЗрж▓рзЗ ржкрж░рж┐ржмрж░рзНрждржи ржПрж▓рзЗ ржЖржмрж╛рж░ makemigrations ржПржмржВ migrate ржжрж┐рждрзЗ рж╣рзЯред

## тЬЕ Day 4: CRUD with ORM

1.Create/Read/Update/Delete (CRUD) operations

2.Django shell / ORM query practice

3.View ржерзЗржХрзЗ DB data fetch ржХрж░рж╛

4.Data form ржжрж┐рзЯрзЗ insert ржХрж░рж╛

ржЖржорж┐ ржПржЗ рж▓рзЗрж╕ржи ржЧрзБрж▓рж╛ ржХржоржкрзНрж▓рж┐ржЯ ржХрж░рж╛рж░ ржЬржирзНржп ржХрж┐ржЫрзБ рж╕рзНржЯрзЗржк ржирж┐ржЪрзЗ ржПржХрзНрж╕ржкрзНрж▓рзЗржЗржи ржХрж░рж╕рж┐ ржпрзЗржЯрж╛ ржжрзЗржЦрзЗ ржЖржорж░рж╛ ржПржЗ рж▓рзЗрж╕ржи рждрж╛ ржХржоржкрзНрж▓рж┐ржЯ
ржХрж░рждрзЗ ржкрж╛рж░рж┐ред ржЙржкрж░рзЗрж░ ржПржЗ рзл ржЯрж┐ рж▓рзЗрж╕ржи ржЖржорж░рж╛ ржирж┐ржЪрзЗрж░ ржПржЗ рззрзж ржЯрж╛ рж╕рзНржЯрзЗржк ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЖржорж░рж╛ рж░рж┐ржнрж┐рж╢ржи ржжрж┐рждрзЗ ржкрж╛рж░ржмрзЛ
ржЗржирж╢рж╛ржЖрж▓рзНрж▓рж╛рж╣ред

ЁЯФ╣ STEP 1: Django ORM (Object Relational Mapper) ORM ржжрж┐рзЯрзЗ Python ржХрзЛржб рж▓рж┐ржЦрзЗржЗ ржбрзЗржЯрж╛ржмрзЗржЬрзЗ ржХрж╛ржЬ ржХрж░рж╛ ржпрж╛рзЯ, SQL
ржирж╛ рж▓рж┐ржЦрзЗржУред Shell ржЪрж╛рж▓рзБ ржХрж░рзЛ:

```bash
 python manage.py shell
```

ЁЯФ╣ STEP 2: Create (рждрзИрж░рж┐ ржХрж░рж╛)

```python
from app_name.models import Product

# 1. Create with create()
Product.objects.create(name='Mobile', price=5000)

# 2. Create with instance
p = Product(name='Laptop', price=80000)
p.save()

```

ЁЯФ╣ STEP 3: Read (ржбрзЗржЯрж╛ ржкрзЬрж╛)

```python
# рж╕ржм ржбрзЗржЯрж╛ ржкрзЬрж╛
Product.objects.all()

# Filter ржХрж░рж╛
Product.objects.filter(price__gt=5000)

# ржПржХржХ ржбрзЗржЯрж╛
Product.objects.get(id=1)

```

ЁЯФ╣ STEP 4: Update (ржЖржкржбрзЗржЯ ржХрж░рж╛)

```python
# ржкрзНрж░ржержорзЗ instance ржЖржирзЛ
p = Product.objects.get(id=1)
p.price = 6000
p.save()

```

ЁЯФ╣ STEP 5: Delete (ржорзБржЫрзЗ ржлрзЗрж▓рж╛)

```python
# ржкрзНрж░ржержорзЗ instance ржЖржирзЛ
p = Product.objects.get(id=1)
p.delete()

```

ЁЯФ╣ STEP 6: View ржерзЗржХрзЗ DB Data Fetch ржХрж░рж╛

```python
# views.py
from django.shortcuts import render
from .models import Product

def product_list(request):
   products = Product.objects.all()
   return render(request, 'products.html', {'products': products})


```

products.html ржЯрзЗржорзНржкрж▓рзЗржЯ ржП рж╕рзЗржЗ ржбрж╛ржЯрж╛ access ржХрж░рж╛ред

```html
<!-- products.html -->
{% for product in products %}
<p>{{ product.name }} - {{ product.price }}</p>
{% endfor %}
```

ЁЯФ╣ STEP 7: Form ржжрж┐рзЯрзЗ Data Insert ржХрж░рж╛ (without ModelForm)

```html
<!-- form.html -->
<form method="POST">
  {% csrf_token %}
  <input type="text" name="name" />
  <input type="number" name="price" />
  <button type="submit">Add Product</button>
</form>
```

```python
# views.py
from .models import Product
from django.shortcuts import render.redirect


def add_product(request):
    if request.method == 'POST':
        name = request.POST['name']
        price = request.POST['price']
        Product.objects.create(name=name, price=price)
        return redirect("formsucces")
    return render(request, 'form.html')

```

ЁЯФ╣ STEP 8: Form + Modelform ржжрж┐рзЯрзЗ Data Insert ржХрж░рж╛

```python
# forms.py

from django import forms
from .models import Product

class ProductForm(forms.ModelForm):
    class Meta:
        model = Product
        fields = ['name', 'price', 'description']
```

ЁЯСЙ ModelForm ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ input ржмрж╛ржирж╛рждрзЗ рж╣рзЯ ржирж╛ред Django ржирж┐ржЬрзЗржЗ ржлрж░рзНржо ржлрж┐рж▓рзНржб рждрзИрж░рж┐ ржХрж░рзЗ ржирзЗрзЯред

```python
# views.py

from django.shortcuts import render, redirect
from .forms import ProductForm

def add_product(request):
    if request.method == 'POST':
        form = ProductForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('product_list')
    else:
        form = ProductForm()
    return render(request, 'add_product.html', {'form': form})
```

```html
<!-- templates/add_product.html -->

<h2>Add Product</h2>
<form method="POST">
  {% csrf_token %} {{ form.as_p }}
  <button type="submit">Add</button>
</form>
```

ЁЯУЭ {{ form.as_p }} ржорж╛ржирзЗ ржлрж░рзНржо ржлрж┐рж▓рзНржбржЧрзБрж▓рзЛ <p> ржЯрзНржпрж╛ржЧрзЗрж░ ржнрж┐рждрж░рзЗ рж░рзЗржирзНржбрж╛рж░ рж╣ржмрзЗред

ЁЯФ╣ STEP 8: Form + Modelform ржжрж┐рзЯрзЗ Data Update (Edit Product) ржХрж░рж╛

```python
# views.py

from .models import Product
from .forms import ProductForm

def edit_product(request, pk):
    product = Product.objects.get(id=pk)
    if request.method == 'POST':
        form = ProductForm(request.POST, instance=product)
        if form.is_valid():
            form.save()
            return redirect('product_list')
    else:
        form = ProductForm(instance=product)
    return render(request, 'edit_product.html', {'form': form})

```

```html
<!-- templates/edit_product.html -->

<h2>Edit Product</h2>
<form method="POST">
  {% csrf_token %} {{ form.as_p }}
  <button type="submit">Update</button>
</form>
```

ЁЯУМ instance=product ржжрж┐рж▓рзЗ form ржкрзНрж░рж┐-ржлрж┐рж▓ржб рж╣ржмрзЗ ржЖржЧрзЗрж░ ржбрзЗржЯрж╛ ржжрж┐рзЯрзЗред ЁЯУМ (request.POST, instance=product) ржжрж┐рж▓рзЗ
instance ржПрж░ ржбрж╛ржЯрж╛ ржорж╛ржирзЗ ржЖржЧрзЗрж░ ржбрж╛ржЯрж╛ request.POST ржжрзНржмрж╛рж░рж╛ replace ржХрж░ржмрзЗред

ЁЯФ╣Django ModelForm ржПрж░ рзкржЯрж┐ рж░рзВржк

| рж░рзВржк ржиржорзНржмрж░ | рж░рзВржк (Code)                                         | ржЙржжрзНржжрзЗрж╢рзНржп               | ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ                       | ржмрзНржпрж╛ржЦрзНржпрж╛ / ржЙржжрж╛рж╣рж░ржг                                              |
| --------- | -------------------------------------------------- | ---------------------- | ------------------------------------ | -------------------------------------------------------------- |
| 1         | `ProductForm()`                                    | Empty form             | ржлрж╛ржБржХрж╛ ржлрж░рзНржо ржжрзЗржЦрж╛рждрзЗ                    | ржирждрзБржи ржкрзНрж░рзЛржбрж╛ржХрзНржЯ add ржХрж░рж╛рж░ рж╕ржорзЯ, ржкрзНрж░ржержоржмрж╛рж░ ржлрж░рзНржо ржжрзЗржЦрж╛ржирзЛ рж╣рзЯ           |
| 2         | `ProductForm(data=request.POST)`                   | POST ржбрзЗржЯрж╛ ржирзЗржУрзЯрж╛        | ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯ рж╣ржУрзЯрж╛рж░ ржкрж░ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржХрж░рждрзЗ | ржЗржиржкрзБржЯ ржнрзНржпрж╛рж▓рж┐ржб рж╣рж▓рзЗ `form.save()` ржХрж░рж╛ рж╣рзЯ                         |
| 3         | `ProductForm(instance=product)`                    | ржкрзНрж░рж┐-ржлрж┐рж▓рзНржб ржлрж░рзНржо        | ржЖржЧрзЗрж░ ржбрзЗржЯрж╛ рж╕рж╣ ржлрж░рзНржо ржжрзЗржЦрж╛рждрзЗ             | Edit ржХрж░рж╛рж░ рж╕ржорзЯ ржЖржЧрзЗрж░ ржкрзНрж░рзЛржбрж╛ржХрзНржЯрзЗрж░ ржЗржиржлрзЛ ржжрж┐рзЯрзЗ ржлрж░рзНржо ржкрзВрж░ржг рж╣рзЯ          |
| 4         | `ProductForm(data=request.POST, instance=product)` | Update with validation | ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯ ржХрж░рзЗ ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ рж╕ржорзЯ  | ржкрзБрж░рж╛рждржи ржбрзЗржЯрж╛рж░ ржЙржкрж░ ржирждрзБржи ржнрзНржпрж╛рж▓рзБ ржмрж╕рж┐рзЯрзЗ `save()` ржХрж░рж▓рзЗ ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ рж╣рзЯ |

ЁЯФ╕ STEP 10: Advanced Product List View

```python
# views.py

def product_list(request):
    products = Product.objects.all()
    return render(request, 'product_list.html', {'products': products})
```

```html
<!-- templates/product_list.html -->

<h2>Product List</h2>
<table border="1">
  <tr>
    <th>Name</th>
    <th>Price</th>
    <th>Description</th>
    <th>Actions</th>
  </tr>
  {% for p in products %}
  <tr>
    <td>{{ p.name }}</td>
    <td>{{ p.price }}</td>
    <td>{{ p.description }}</td>
    <td>
      <a href="{% url 'edit_product' p.id %}">Edit</a> |
      <a href="{% url 'delete_product' p.id %}">Delete</a>
    </td>
  </tr>
  {% endfor %}
</table>
```

тЬЕ рж░рж┐ржнрж┐рж╢ржи ржХрзМрж╢рж▓:

| Form рж░рзВржк                                  | Context (ржХрзЛржерж╛рзЯ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ?)         |
| ----------------------------------------- | ----------------------------------- |
| `ProductForm()`                           | ржирждрзБржи ржлрж░рзНржо ржжрзЗржЦрж╛ржирзЛрж░ рж╕ржорзЯ               |
| `ProductForm(request.POST)`               | рж╕рж╛ржмржорж┐ржЯрзЗрж░ ржкрж░ ржЗржиржкрзБржЯ ржпрж╛ржЪрж╛ржЗ             |
| `ProductForm(instance=...)`               | ржЖржЧрзЗрж░ ржбрзЗржЯрж╛ ржкрзНрж░рж┐-ржлрж┐рж▓рзНржб ржХрж░рж╛рж░ рж╕ржорзЯ       |
| `ProductForm(request.POST, instance=...)` | рж╕рж╛ржмржорж┐ржЯ ржХрж░рзЗ ржЖржЧрзЗрж░ ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ рж╕ржорзЯ |

## тЬЕ Day 5: Model Relationship

- one-to-one(onetonefield)
- One-to-Many (ForeignKey)
- Many-to-Many(manytomanyfield)
- related_name, related_query_name
- Query set chaining (filter, exclude)

#### ЁЯФЧ рзз. One-to-One рж╕ржорзНржкрж░рзНржХ (OneToOneField)

- ржжрзБржЗржЯрж┐ ржоржбрзЗрж▓ ржпржЦржи ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕ржЩрзНржЧрзЗ ржПржХ-ржПржХ рж╕ржорзНржкрж░рзНржХ рждрзИрж░рж┐ ржХрж░рзЗред
- ржпржЦржи ржПржХржЯрж╛ ржЯрзЗржмрж┐рж▓ ржПрж░ ржПржХржЯрж╛ Raw ржЕржирзНржп ржПржХржЯрж╛ ржЯрзЗржмрж┐рж▓ ржПрж░ ржПржХржЯрж╛ raw ржПрж░ рж╕рж╛ржерзЗ рж╕ржорзНржкрж░рзНржХржпрзБржХрзНрждред
- ржпрзЗржоржи: ржкрзНрж░рждрж┐ржЯрж┐ User ржПрж░ ржПржХржЯрж╛ржЗ Profile ржерж╛ржХржмрзЗредржЖржмрж╛рж░ ржпрзЗржоржи ржПржХржЯрж╛ ржЗржЙрж╕рж╛рж░ ржПрж░ ржПржХржЯрж╛ржЗ settings ржерж╛ржХрзЗ ржмрж╛ ржПржХржЯрж╛ржЗред
  ржПржЦрж╛ржирзЗ users ржПржХржЯрж╛ ржЯрзЗржмрж┐рж▓ ржЖржмрж╛рж░ settings ржЖрж░ ржПржХржЯрж╛ ржЯрзЗржмрж┐рж▓ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржЖрж░ ржПржХржЯрж╛ ржЯрзЗржмрж┐рж▓ ржмрзБржЭрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред

тЬЕ ржХрзЛржб ржЙржжрж╛рж╣рж░ржг:

```python
class User(models.Model):
    name = models.CharField(max_length=100)

class Profile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    bio = models.TextField()
```

ЁЯФН on_delete=models.CASCADE ржорж╛ржирзЗ ржпржжрж┐ User ржорзБржЫрзЗ ржпрж╛рзЯ, рждрж╛рж░ Profile-ржУ ржорзБржЫрзЗ ржпрж╛ржмрзЗред

#### ЁЯФЧ рзи. One-to-Many рж╕ржорзНржкрж░рзНржХ (ForeignKey)

- ржПржХржЯрж┐ ржоржбрзЗрж▓ ржЕржирзЗржХ ржЧрзБрж▓рзЛ instance-ржХрзЗ рж░рж┐ржкрзНрж░рзЗржЬрзЗржирзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржЕржирзНржп ржПржХржЯрж┐ ржоржбрзЗрж▓рзЗрж░ ржоржзрзНржп ржжрж┐рзЯрзЗред
- ржпржЦржи ржПржХржЯрж╛ ржЯрзЗржмрж┐рж▓ ржПрж░ ржПржХржЯрж╛ raw ржЕржирзНржп ржПржХржЯрж╛ ржЯрзЗржмрж┐рж▓ ржПрж░ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ raw ржПрж░ рж╕рж╛ржерзЗ рж╕ржорзНржкрж░рзНржХржпрзБржХрзНрждредржмрж▓рж╛ ржпрж╛рзЯ ржЕржирзЗржХ
  рждрж╛ ржкрж┐рждрж╛ ржкрзБрждрзНрж░рзЗрж░ ржоржзрзНржпрзЗ рж╕ржорзНржкрж░рзНржХрзЗрж░ ржорждрзЛ ржПржХ ржкрж┐рждрж╛рж░ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ рж╕ржирзНрждрж╛ржи ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗредржПржЗ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржкрж┐рждрж╛ рж╣рж▓рзЛ
  ржпрзЗржЗ ржЯрзЗржмрж┐рж▓ ржХрзЗ foregnkey рж╣рж┐рж╕рж╛ржмрзЗ рж╕рзЗржЯ ржХрж░рж╕рж┐ ржЕржирзНржпржжрж┐ржХрзЗ ржкрзБрждрзНрж░ рж╣рж▓рзЗ ржпрзЗржЗ ржЯрзЗржмрж┐рж▓рзЗ foregnkey рж╕рзЗржЯ ржХрж░ржЫрж┐ред
- ржпрзЗржоржи: ржПржХржЯрж┐ Category-ржПрж░ ржоржзрзНржпрзЗ ржЕржирзЗржХржЧрзБрж▓рзЛ Product ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗредржЖржмрж╛рж░ ржПржХржЯрж╛ ржЗржЙрж╕рж╛рж░ ржПрж░ ржПржХрж╛ржзрж┐ржХ message ржерж╛ржХрждрзЗ
  ржкрж╛рж░рзЗред ржПржХржЯрж╛ ржЗржЙрж╕рж╛рж░ ржПржХржзрж┐ржХ ржЕрж░рзНржбрж╛рж░ ржжрж┐рждрзЗ ржкрж╛рж░рзЗредржПржЗ ржХрзНрж╖рзЗрждрзНрж░рзЗ user,category рж╣рж▓рзЛ ржкрж┐рждрж╛ ржЯрзЗржмрж┐рж▓ ржЖрж░
  message,order,product рж╣рж▓рзЛ ржкрзБрждрзНрж░ ржЯрзЗржмрж┐рж▓

тЬЕ ржХрзЛржб ржЙржжрж╛рж╣рж░ржг:

```python
class Category(models.Model):
    name = models.CharField(max_length=100)

class Product(models.Model):
    category = models.ForeignKey(Category, on_delete=models.CASCADE)
    title = models.CharField(max_length=100)
```

ЁЯФН ржПржЦрж╛ржирзЗ Product ржоржбрзЗрж▓рзЗ ForeignKey рж░рзЯрзЗржЫрзЗ Category-рж░ рж╕рж╛ржерзЗред ржПржХ ржХрзНржпрж╛ржЯрзЗржЧрж░рж┐рждрзЗ ржЕржирзЗржХ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред

#### ЁЯФЧ рзй. Many-to-Many рж╕ржорзНржкрж░рзНржХ (ManyToManyField)

- ржжрзБржЗржЯрж┐ ржоржбрзЗрж▓рзЗрж░ ржоржзрзНржпрзЗ ржЕржирзЗржХ-ржерзЗржХрзЗ-ржЕржирзЗржХ рж╕ржорзНржкрж░рзНржХред
- ржпржЦржи ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓ ржПрж░ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ raw ржПрж░ рж╕рж╛ржерзЗ ржЖрж░рзЗржХржЯрж┐ ржЯрзЗржмрж┐рж▓ ржПрж░ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ raw рж╕ржорзНржкрж░рзНржХржпрзБржХрзНрждред ржЕржирзЗржХ ржЯрж╛
  ржЪрж╛ржЪрж╛ ржнрж╛рждрж┐ржЬрж╛рж░ рж╕ржорзНржкрж░рзНржХрзЗрж░ ржорждрзЛ ржПржХ ржЪрж╛ржЪрж╛рж░ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ ржнрж╛рждрж┐ржЬрж╛ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ ржЖржмрж╛рж░ ржПржХ ржнрж╛рждрж┐ржЬрж╛рж░ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ
  ржЪрж╛ржЪрж╛ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред

- ржпрзЗржоржи: ржПржХржЬржи Student ржЕржирзЗржХ ржПржХ ржмрж╛ Course ржХрж░рждрзЗ ржкрж╛рж░рзЗ, ржЖржмрж╛рж░ ржПржХржЯрж┐ Course-ржП ржПржХ ржмрж╛ ржЕржирзЗржХ Student ржерж╛ржХрждрзЗ
  ржкрж╛рж░рзЗредржПржХржЯрж┐ ржЯрзНржпрж╛ржЧ ржПржХ ржмрж╛ ржПржХржзрж┐ржХ ржкрзЛрж╕рзНржЯ ржП ржПржкрж▓рж╛ржЗ рж╣рждрзЗ ржкрж╛рж░рзЗ ржЖржмрж╛рж░ ржПржХржЯрж┐ ржкрзЛрж╕рзНржЯ ржП ржПржХрж╛ржзрж┐ржХ ржЯрзНржпрж╛ржЧ use рж╣рждрзЗ ржкрж╛рж░рзЗред

тЬЕ ржХрзЛржб ржЙржжрж╛рж╣рж░ржг:

```python
class Student(models.Model):
    name = models.CharField(max_length=100)

class Course(models.Model):
    title = models.CharField(max_length=100)
    students = models.ManyToManyField(Student)
```

#### ЁЯФД рзк. related_name ржУ related_query_name

related_name:

- ржПржЯрж┐ reverse relationship ржХрж░рж╛рж░ рж╕ржорзЯ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред

- ржпрзЗржЦрж╛ржи ржерзЗржХрзЗ relation рждрзИрж░рж┐ рж╣рзЯржирж┐, рж╕рзЗржЦрж╛ржи ржерзЗржХрзЗржУ access ржХрж░рждрзЗ ржжрзЗрзЯред
- ржорж╛ржирзЗ ржкрж░рж╕рзНржкрж░ рж╕ржорзНржкрж░рзНржХржпрзБржХрзНржд ржЯрзЗржмрж┐рж▓ ржЧрзБрж▓рж╛рж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржПржХржЯрж╛ ржЯрзЗржмрж┐рж▓ ржПрж░ raw ржПрж░ рж╕рж╛ржерзЗ рж╕ржорзНржкрж░рзНржХржпрзБржХрзНржд ржЕржирзНржп ржЯрзЗржмрж┐рж▓
  raw ржПрж░ ржПржХрзНрж╕рзЗрж╕редralated name ржжрзНржмрж╛рж░рж╛ ржЖржорж░рж╛ reverse ржПржХрзНрж╕рзЗрж╕ ржПрж░ name рж╕рзЗржн ржХрж░рждрзЗ ржкрж╛рж░рж┐ ржмрж╛ржЗ ржбрзЗржлрж▓рзНржЯ ржПржЯрж╛
  relatedtablename_sets ржерж╛ржХрзЗ рждрж╛ ржЖржорж░рж╛ ржЪрзЗржЮрзНржЬ ржХрж░рзЗ ржирж┐ржЬрзЗрж░ ржорждрзЛ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рж┐ред
- ржПржЯрж╛ рж╣ржЪрзНржЫрзЗ Child Model ржерзЗржХрзЗ Parent Model ржХрзЗ access ржХрж░рж╛рж░ ржкрж░, Parent ржПрж░ reverse relation-ржП Child ржЧрзБрж▓рзЛ
  ржХрж┐рж╕рзЗрж░ ржорж╛ржзрзНржпржорзЗ access ржХрж░ржм рж╕рзЗржЯрж╛ define ржХрж░рзЗред

ЁЯФ╕ рж╕рж╣ржЬржнрж╛ржмрзЗ: Parent Model ржерзЗржХрзЗ Child-ржжрзЗрж░ access ржХрж░рж╛рж░ ржирж╛ржоред

тЬЕ ржЙржжрж╛рж╣рж░ржг:

```python
class Blog(models.Model):
    title = models.CharField(max_length=100)

class Comment(models.Model):
    blog = models.ForeignKey(Blog, on_delete=models.CASCADE, related_name='comments')
    content = models.TextField()
```

ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ blog ржЯрзЗржмрж┐рж▓ рж╣рждрзЗ ржХрж┐ name ржжрж┐рзЯрж╛ ржПрж░ Raw ржПрж░ ржорж╛ржирзЗ ржкрзНрж░рждрж┐ржЯрж╛ blog ржПрж░ comment ржПржХрзНрж╕рзЗрж╕ ржХрж░ржмрзЛ рждрж╛ рж░рж┐рж▓рзЗржЯрзЗржб
name ржжрж┐рзЯрж╛ ржмрж▓рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ ржЖржорж░рж╛ред

ЁЯФН ржмрзНржпржмрж╣рж╛рж░:

```python
blog = Blog.objects.get(id=1)
comments = blog.comments.all()  # related_name ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ
```

##### related_query_name:

- ржПржЯрж┐ QuerySet chaining-ржПрж░ рж╕ржорзЯ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржп ржХрж╛ржЬрзЗ ржЖрж╕рзЗред тЬЕ ржЙржжрж╛рж╣рж░ржг:

```python
class Author(models.Model):
    name = models.CharField(max_length=100)

class Book(models.Model):
    author = models.ForeignKey(Author, on_delete=models.CASCADE, related_query_name='books_written')

```

ЁЯФН ржмрзНржпржмрж╣рж╛рж░:

```python
Author.objects.filter(books_written__title__icontains='python')
```

- ржорж╛ржирзЗ рж╣рж▓рзЛ ржкрзНржпрж╛рж░рзЗржирзНржЯ рж╣рждрзЗ ржбрж╛ржЗрж░рзЗржХрзНржЯ рждрж╛рж░ рж░рзЗрж▓рзЗржЯрзЗржЯ ржЪрж╛ржЗрж▓рзНржб raw ржЧрзБрж▓рж╛рж░ ржлрж┐рж▓рзНржб ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рждрзЗ ржкрж╛рж░рж┐
  related_query_name рж╣рж▓рзЛ ржкрзНржпрж╛рж░рзЗржирзНржЯ ржПрж░ рж░рж┐рж▓рзЗржЯрзЗржб ржЪрж╛ржЗрж▓рзНржб ржЧрзБрж▓рж╛рж░ ржЕржмржЬрзЗржХрзНржЯ ржПрж░ ржУржкрж░ ржХрж┐ ржирж╛ржо ржжрж┐рзЯрж╛ query ржмрж╛
  ржЕржкрж╛рж░рзЗрж╢ржи ржЪрж╛рж▓рж╛ржмрзЛред ржЕрж░рзНржерж╛рзО ржПржЯрж╛ рж░рж┐рж▓рзЗржЯрзЗржб ржЪрж╛ржЗрж▓рзНржб ржЧрзБрж▓рж╛рж░ queryset,fieldsets ржХрзЗ ржмрзБржЭрж╛рзЯред ржпрж╛рж░ ржУржкрж░ ржмрж┐ржнрж┐ржирзНржи
  ржХрзЛрзЯрзЗрж░рж┐ ржЪрж▓рж╛ рж╣ржмрзЗред ржмрж▓рж╛ ржпрж╛рзЯ ржПржЯрж╛ parent.childset ржПрж░ shortform.
- ржПржЯрж╛ рж╣ржЪрзНржЫрзЗ ржпржЦржи рждрзБржорж┐ Parent Model ржХрзЗ filter ржХрж░ржмрзЗ рждрж╛рж░ Child Model ржПрж░ ржХрзЛржи attribute ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ, рждржЦржи
  ржХрзЛржи ржирж╛ржорзЗ query ржЪрж▓ржмрзЗ тАФ рж╕рзЗржЯрж╛ define ржХрж░рзЗред

ЁЯФ╕ рж╕рж╣ржЬржнрж╛ржмрзЗ: Parent Model ржХрзЗ filter ржХрж░рж╛рж░ рж╕ржорзЯ, related Child field-ржХрзЗ ржХрзЛржи ржирж╛ржорзЗ ржЪрзЗржирж╛ржмрзЗ тАФ рж╕рзЗржЯрж╛ред child ржПрж░
field ржЕржирзБржпрж╛рзЯрзА ржкрзНржпрж╛рж░рзЗржирзНржЯ ржХрзЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржмрж╛ ржкрзНржпрж╛рж░рзЗржирзНржЯ ржП ржХрзЛрзЯрзЗрж░рж┐ ржЪрж╛рж▓рж╛ржирзЛред Parent Model ржерзЗржХрзЗ Child-fields
ржЕржирзБржпрж╛рзЯрзА ржХрзЛрзЯрзЗрж░рж┐ ржЪрж╛рж▓рж╛рж░ ржирж╛ржоред

ЁЯФЧ рзл. QuerySet Chaining (ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржп)

тЬЕ filter(): ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж┐ржЫрзБ ржбрзЗржЯрж╛ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рждрзЗ:

```python
Product.objects.filter(price__gt=100)
```

тЬЕ exclude(): ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж┐ржЫрзБ ржмрж╛ржж ржжрж┐рждрзЗ:Filter ржПрж░ ржЙрж▓рзНржЯрзЛред ржлрж┐рж▓рзНржЯрж╛рж░ рж╢рж░рзНржд ржорж╛ржирж╛ ржЕржмржЬрзЗржХрзНржЯ ржЧрзБрж▓рж╛ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржЖрж░
exclude рж╢рж░рзНржд ржирж╛ ржорж╛ржирж╛ ржЕржмржЬрзЗржХрзНржЯ ржЧрзБрж▓рж╛ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ

```python
Product.objects.exclude(product_type='digital')
```

ЁЯза Bonus Tip:

- рж╕ржмрж╕ржорзЯ рж╕ржорзНржкрж░рзНржХрзЗрж░ ржзрж░ржи ржмрзБржЭрзЗ OneToOneField, ForeignKey ржмрж╛ ManyToManyField ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗред

- related_name ржжрж┐рзЯрзЗ reverse querying ржЖрж░ржУ readable ржПржмржВ manageable рж╣рзЯред

- related_query_name ржжрж┐рзЯрзЗ queryset chaining ржЕржирзЗржХ clean рж╣рзЯред

---

## тЬЕ Day 6: Django Forms & ModelForm

# ┬аDjango Form Handling Handnote тЬНя╕П

ржПржЗ ржирзЛржЯржЯрж┐ Django Form Handling ржирж┐ржпрж╝рзЗ ржЖржЬржХрзЗрж░ ржЖрж▓рзЛржЪржирж╛ ржЕржирзБржпрж╛ржпрж╝рзА рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ тАФ ржкрзНрж░рждрж┐ржЯрж┐ ржЯржкрж┐ржХ, function,
ржПржмржВ concept рж╕рзБржирзНржжрж░ржнрж╛ржмрзЗ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рзЗ future ржП рж░рж┐ржнрж┐рж╢ржирзЗрж░ ржЬржирзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣рж▓рзЛред

---

### ЁЯОп 1. Form vs ModelForm

| Aspect                           | Form                                                          | ModelForm                                                 |
| -------------------------------- | ------------------------------------------------------------- | --------------------------------------------------------- |
| Data Source                      | Manual Field define                                           | Model ржерзЗржХрзЗ Field auto create                              |
| Use-case                         | Non-model data ржЕржержмрж╛ manual validation                         | Direct Model CRUD ржЬржирзНржп                                    |
| Advantage                        | ржмрзЗрж╢рж┐ control                                                  | auto fields, less code                                    |
| ЁЯОп ржЙржжрзНржжрзЗрж╢рзНржп                      | ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ ржлрж┐рж▓рзНржб ржмрж╛ржирж┐рзЯрзЗ ржлрж░рзНржо рждрзИрж░рж┐ ржХрж░рж╛                         | ржоржбрзЗрж▓ ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржлрж░рзНржо ржЕржЯрзЛ рждрзИрж░рж┐ ржХрж░рж╛                  |
| ЁЯз▒ Field ржХрж┐ржнрж╛ржмрзЗ рждрзИрж░рж┐ рж╣рзЯ          | ржкрзНрж░рждрзНржпрзЗржХржЯрж┐ Field ржирж┐ржЬрзЗ declare ржХрж░рждрзЗ рж╣рзЯ                         | Model ржПрж░ Field ржЧрзБрж▓рзЛ ржирж┐ржЬрзЗ ржирж┐ржЬрзЗ ржлрж░рзНржорзЗ ржпрзБржХрзНржд рж╣рзЯ              |
| ЁЯУЭ ржХрзЛржерж╛рзЯ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ              | ржпржЦржи ржХрзЛржирзЛ ржоржбрзЗрж▓рзЗрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржлрж░рзНржо ржирж╛, ржмрж░ржВ ржХрж╛рж╕рзНржЯржо ржЗржиржкрзБржЯ рж▓рж╛ржЧрзЗ | ржпржЦржи ржХрзЛржирзЛ ржоржбрзЗрж▓рзЗрж░ ржЗржиржкрзБржЯ/ржбрзЗржЯрж╛ CRUD ржПрж░ ржЬржирзНржп ржлрж░рзНржо рждрзИрж░рж┐ ржХрж░рждрзЗ рж╣рзЯ |
| ЁЯФз Validation                    | ржкрзНрж░рждрж┐ржЯрж┐ ржлрж┐рж▓рзНржб ржПрж░ ржЬржирзНржп ржирж┐ржЬрзЗ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ validation ржжрж┐рждрзЗ рж╣рзЯ      | ржоржбрзЗрж▓ ржПрж░ validation ржЕржЯрзЛ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ рж╣рзЯрзЗ ржпрж╛рзЯ                |
| ЁЯЫа ржХрж╛ржЬрзЗрж░ ржирж┐рзЯржирзНрждрзНрж░ржг                | рж╕ржм ржХрж┐ржЫрзБ ржирж┐ржЬрзЗрж░ ржоржд ржХрж░рзЗ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рж╛ ржпрж╛рзЯ                        | ржЕржирзЗржХ ржХрж┐ржЫрзБ ржЕржЯрзЛ рж╣рзЯрзЗ ржпрж╛рзЯ, рждржмрзЗ ржЙржЗржЬрзЗржЯ ржУ рж▓рзЗржмрзЗрж▓ ржХрж╛рж╕рзНржЯржо ржХрж░рж╛ ржпрж╛рзЯ   |
| ЁЯзй ржХрзЛржбрзЗрж░ ржкрж░рж┐ржорж╛ржг                  | ржЕржирзЗржХ ржмрзЗрж╢рж┐ ржХрзЛржб рж▓рж┐ржЦрждрзЗ рж╣рзЯ                                        | ржЕржирзЗржХ ржХржо ржХрзЛржбрзЗ ржлрж░рзНржо рждрзИрж░рж┐ рж╣рзЯрзЗ ржпрж╛рзЯ                            |
| ЁЯзСтАНЁЯТ╗ Performance & Maintainability | ржХрзЛржб ржмрзЬ рж╣рзЯ, ржХрж┐ржирзНрждрзБ рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ ржирж┐рзЯржирзНрждрзНрж░ржг ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ               | ржХрзЛржб ржЫрзЛржЯ рж╣рзЯ, ржХрж┐ржирзНрждрзБ рж╕ржм ржХрж┐ржЫрзБ ржЕржЯрзЛ ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗ                |

---

### ЁЯОп 2. Custom Validation

### ЁЯФ╣ Field level validation:

```python
# Tag name field ржПрж░ validation
class MyForm(forms.Form):
    tag = forms.CharField()

#    def clean_fieldname()  syntex ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж╛ ржлрж┐рж▓рзНржб ржПрж░ ржЬржирзНржп ржХрж╛рж╕рзНржЯржо ржмрж╛рж▓рж┐ржЯрзЗрж╢ржи
    def clean_tag(self):
        value = self.cleaned_data['tag']
        if 'badword' in value:
            raise forms.ValidationError("Don't use bad words")
        return value.stripe() # cleaned_data["field"] ржЖржкржбрзЗржЯ ржХрж░рж╛ рж╣рж▓рзЛ
"""
```

ЁЯФ╕clean_field ржорзЗржержб ржмрзНржпрж╛ржирж╛рж░ ржЙржжрзНржжрзЗрж╢ ржХрзЛржи ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж┐рж▓рзНржб ржнрзНржпрж╛рж▓рж┐ржбрзЗржЯ ржХрж░рж╛ `cleaned_data["field"]` ржЖржкржбрзЗржЯ
ржХрж░рзЗ рж╕рзЗржЗ ржнрзНржпрж╛рж▓рзБ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ django ржПржЯрж╛ржЗ ржзрж░рзЗ ржирзЗрзЯ ржПржЗ ржнрж╛ржмрзЗржЗ ржХрж╛ржЬ ржХрж░рзЗ ржЖрж░ return ржирж╛ ржжрж┐рж▓рзЗ
`dango ржнрж╛ржмрзЗ ржбрзЗржнрзЗрж▓ржкрж╛рж░ null рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржЫрзЗ` рждрж╛ржЗ рждрж╛рж░ рж╕рзЗржЗ ржлрж┐рж▓рзНржб ржПрж░ ржнрзНржпрж╛рж▓рзБ null ржХрж░рзЗ рж░рж╛ржЦрзЗ рждржЦржи рж╕рзЗржЗ ржнрзНржпрж╛рж▓рзБ ржмрж╛
ржлрж┐рж▓рзНржб ржЯрзЗржорзНржкрж▓рзЗржЯ ржнрж┐ржЙ ржХрзЛржерж╛рзЯ ржпрж╛ржмрзЗ ржирж╛ред ржХрж╛рж░ржг null ред

ЁЯФ╕ clean\_<fieldname>() Method

| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп               | ржмрзНржпрж╛ржЦрзНржпрж╛                                                  |
| ----------------------- | --------------------------------------------------------- |
| ржХржЦржи ржЪрж▓рзЗ?                | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж┐рж▓рзНржбрзЗрж░ validation ржПрж░ рж╕ржорзЯ                       |
| ржХрж┐ржнрж╛ржмрзЗ define ржХрж░рзЛ?      | `def clean_email(self):` ржПрж░ ржорждрзЛ ржХрж░рзЗ                       |
| ржХрзЛржи ржлрж┐рж▓рзНржбрзЗрж░ ржЬржирзНржп ржЪрж▓рзЗ?   | рж╢рзБржзрзБржорж╛рждрзНрж░ ржУржЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж┐рж▓рзНржбрзЗрж░ ржЬржирзНржп                       |
| return ржжрж┐рждрзЗ рж╣ржпрж╝?        | тЬФя╕П **рж╣рзНржпрж╛ржБ, ржжрж┐рждрзЗ рж╣ржмрзЗржЗ**                                   |
| return ржжрж┐рж▓рзЗ ржХрзА рж╣рзЯ?      | ржУржЗ ржлрж┐рж▓рзНржбрзЗрж░ `cleaned_data[field]` ржЖржкржбрзЗржЯ рж╣ржпрж╝                |
| return ржирж╛ ржжрж┐рж▓рзЗ ржХрзА рж╣рзЯ?   | Django ржзрж░рзЗ ржирзЗржпрж╝ `None` ржмрж╛ ржлрж┐рж▓рзНржб ржмрж╛ржж ржпрж╛ржпрж╝                  |
| ржХрж┐рж╕рзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ? | format ржарж┐ржХ ржХрж░рж╛, lowercase/uppercase, custom check ржЗрждрзНржпрж╛ржжрж┐ |

### ЁЯФ╣ Form level validation (clean method override):

```python
    def clean(self):
        data = super().clean()  # default validation ржХрж╛ржЬ ржХрж░рзЗ
        if data.get('password') != data.get('confirm_password'):
          #def clean_add_error(fieldname,error_msg)  syntex ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж┐рж▓рж╕ ржПрж░ error dict ржП error ржЕрзНржпрж╛ржб ржХрж░рж╛рж░ ржЬржирзНржп
            self.add_error('confirm_password', "Password doesn't match")
```

ЁЯФ╕ `super().clean()` ржирж╛ ржжрж┐рж▓рзЗ built-in validation (required, type check) execute рж╣рждрзЛ ржирж╛ред

ЁЯФ╕ `this.clean()` ржжрж┐рж▓рзЗ рж╕рзЗ ржирж┐ржЬрзЗрж░ ржорж╛ржирзЗ ржпрзЗржЯрж╛ ржЪрж╛ржЗрж▓рзНржб ржП ржмрж╛ржирж╛ржЗржЫрж┐ рж╕рзЗржЯрж╛ ржХрж▓ recersive behave ржХрж░рждрзЛред ржХрж░рждрзЛ ржЖрж╕рж▓
ржмрж┐рж▓рзНржб ржЗржи ржХрзНрж▓рж┐ржи ржХрж▓ ржХрж░рждрзЛ ржирж╛ ржпрж╛рж░ ржлрж▓рзЗ clean_data ржирж╛ржорзЗ dict ржЯрж╛ржУ ржкрзЗрждрж╛ржо ржирж╛ ржпрзЗржЯрж╛ ржмрж╛ ржнрзНржпрж╛рж▓рж┐ржбрзЗржЯрзЗ ржбрж╛ржЯрж╛ржЧрзБрж▓рж╛рж░
dict ржмрж╛ржирж╛ржЗрзЯрж╛ store ржХрж░рзЗредржЖрж░ ржХрж▓ ржирж╛ ржХрж░рж▓рзЗ `defauld validation` ржУ ржкрж╛ржЗрждрж╛ржо ржирж╛ clean_dict ржУ ржкрж╛ржЗрждрж╛ржо ржирж╛ред

ЁЯФ╕ custom clean method ржП рж╢рзБржзрзБ return ржХрж░рж▓рзЗ рж╣ржмрзЗ ржирж╛, ржЖржорж╛ржжрзЗрж░ add_error ржмрж╛ raise ValidationError ржжрж┐рзЯрзЗ ржнрзБрж▓
ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рждрзЗ рж╣ржмрзЗред

ЁЯФ╕ clean() ржорзЗржержб ржмрзНржпрж╛ржирж╛рж░ ржЙржжрзНржжрзЗрж╢ ржлрж░рзНржо ржПрж░ ржПржХрж╛ржзрж┐ржХ ржлрж┐рж▓рзНржб ржнрзНржпрж╛рж▓рж┐ржбрзЗржЯ ржХрж░рж╛ ржмрж╛ ржлрзБрж▓ ржлрж░рзНржо ржнрзНржпрж╛рж▓рж┐ржбрзЗржЯ ржХрж░рж╛ ржПржмржВ
self.cleaned_data ржорзЛржбрж┐ржлрж╛ржЗ ржХрж░рж╛ ржпржЦржи ржЖржорж░рж╛ cleaned_data=super().clean() ржжрж┐рж▓рзЗ django ржПрж░ ржмрж┐рж▓рзНржб ржЗржи
cleared_data ржорзЛржбрж┐ржлрж╛ржЗ рж╣рзЯ ржХрж╛рж░ржг super().clean() cleaned_data dict рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗред рждржЦржи django clean()
ржПрж░ржерзЗржХрзЗ expectetion ржлрзБрж▓ржлрж┐рж▓ рж╣рзЯред ржЖрж░ ржПрж░ ржкрж░ ржЖрж░ ржУ ржпржжрж┐ ржорзЛржбрж┐ржлрж╛ржЗ ржХрж░рж┐ ржпрзЗржоржи cleaned_data["name"]=
cleaned_data["name"].upper() ржПржЯрж╛рж░ ржкрж░ ржЪрж╛ржЗрж▓рзЗ return cleaned_data ржжрж┐рж▓рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ ржирж╛ рж╣рж▓рзЗ django ржирж┐ржЬрзЗржЗ рждрж╛
ржХрж░рзЗ ржХрж╛рж░ржг ржПржЯрж╛ clean() ржорзЗржержб ржПрж░ behaveред рждрж╛ржЗ return ржжрзЗржУрзЯрж╛ ржЬрзБрж░рзБрж░рж┐ ржирж╛ optional

ЁЯФ╕ clean() Method

| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп                          | ржмрзНржпрж╛ржЦрзНржпрж╛                                                              |
| ---------------------------------- | --------------------------------------------------------------------- |
| ржХржЦржи ржЪрж▓рзЗ?                           | рж╕ржм ржлрж┐рж▓рзНржбрзЗрж░ built-in ржУ field-level clean рж╢рзЗрж╖ рж╣ржУржпрж╝рж╛рж░ ржкрж░                 |
| рж╕ржм ржлрж┐рж▓рзНржбрзЗрж░ cleaned_data available? | тЬФя╕П рж╣рзНржпрж╛ржБ                                                              |
| return ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХ?                | тЭМ ржирж╛, return ржирж╛ ржХрж░рж▓рзЗржУ Django ржЖржЧрзЗрж░ `self.cleaned_data` ржЗржЙржЬ ржХрж░рзЗ        |
| return ржжрж┐рж▓рзЗ ржХрзА рж╣рзЯ?                 | ржкрзБрж░рзЛ `cleaned_data` override рж╣рзЯ                                       |
| ржХрж┐рж╕рзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ?            | multiple ржлрж┐рж▓рзНржб ржПржХрж╕рж╛ржерзЗ ржпрж╛ржЪрж╛ржЗ, cross-validation, ржирждрзБржи ржлрж┐рж▓рзНржб ржпрзЛржЧ ржЗрждрзНржпрж╛ржжрж┐ |

ЁЯФ╕ Django ржПрж░ ржнрж┐рждрж░рзЗрж░ ржЖржЪрж░ржг (Internals): | Method | cleaned*data ржЖржЧрзЗ ржерзЗржХрзЗ ржерж╛ржХрзЗ? | ржХрзЛржи ржлрж┐рж▓рзНржбрзЗрж░ ржЬржирзНржп
available? | return ржирж╛ ржжрж┐рж▓рзЗ ржХрж┐ рж╣рзЯ? | | ----------------- | ---------------------------- |
--------------------------- | ---------------------- | | `__init__()` | тЭМ ржирж╛ | ржХрж┐ржЫрзБржЗ ржерж╛ржХрзЗ ржирж╛ |
error рж╣рждрзЗ ржкрж╛рж░рзЗ | |
`clean*<field>()`| тЬФя╕П рж╢рзБржзрзБ ржУржЗ ржлрж┐рж▓рзНржб | ржЕржирзНржп ржлрж┐рж▓рзНржб ржирж╛ржУ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ | ржлрж┐рж▓рзНржб ржмрж╛ржж ржпрзЗрждрзЗ ржкрж╛рж░рзЗ | |`clean()` |
тЬФя╕П рж╕ржм ржлрж┐рж▓рзНржб | рж╕ржм ржлрж┐рж▓рзНржб | ржЖржЧрзЗрж░ cleaned_data ржзрж░рзЗ |

ЁЯФ╕ ржЙржжрж╛рж╣рж░ржг Diagram (Flow Summary):

```pgsql

тмЗя╕П User Input Form
        тмЗя╕П
is_valid() тЮбя╕П Form._clean_fields()
        тмЗя╕П
рзз. Field built-in validation
рзи. clean_<field>() тЮбя╕П return cleaned value
        тмЗя╕П
рзй. Form.clean() тЮбя╕П full cleaned_data modify/check
        тмЗя╕П
тЬФя╕П form.cleaned_data тЮбя╕П Final cleaned values

```

---

### ЁЯОп 3. Form Submission Handling (POST)

```python
if request.method == 'POST':
    form = MyForm(request.POST)
    if form.is_valid():
        # data = form.cleaned_data
        ... # process data
else:
    form = MyForm()

return render(request, 'form.html', {'form': form})
```

ЁЯФ╕ `form.is_valid()` false рж╣рж▓рзЗ cleaned_data ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ ржирж╛ред рждрж╛ржЗ form.errors ржжрзЗржЦрждрзЗ рж╣ржпрж╝ред

---

### ЁЯОп 4. `cleaned_data` vs `clean` method

| ржмрж┐рж╖рзЯ                | `cleaned_data`                               | `clean()` method (form-level validation)                     |
| ------------------- | -------------------------------------------- | ------------------------------------------------------------ |
| ЁЯУМ ржХрзА               | valid field ржЧрзБрж▓рзЛрж░ ржбрж┐ржХрж╢ржирж╛рж░рж┐                   | form ржПрж░ рж╕ржм ржлрж┐рж▓рзНржб ржПржХрж╕рж╛ржерзЗ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛рж░ ржЬржирзНржп method               |
| ЁЯФН ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ ржХржЦржи    | `form.is_valid()` рж╕ржлрж▓ рж╣рж▓рзЗ                    | `form.is_valid()` ржПрж░ рж╕ржорзЯржЗ call рж╣рзЯ                            |
| ЁЯУе ржХрзА рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ   | dictionary тЖТ `{field_name: value}`           | рж╕рж╛ржзрж╛рж░ржгржд `super().clean()` ржПрж░ result return ржХрж░рж╛ ржЙржЪрж┐ржд          |
| ЁЯУД Validation Scope | рж╢рзБржзрзБ field level validation ржПрж░ ржкрж░рзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ | ржПржХрж╛ржзрж┐ржХ ржлрж┐рж▓рзНржбрзЗрж░ ржоржзрзНржпрзЗ рж╕ржорзНржкрж░рзНржХ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛рж░ ржЬржирзНржп use рж╣рзЯ          |
| ЁЯТе Error Handling   | ржПржЦрж╛ржирзЗ error ржерж╛ржХрзЗ ржирж╛ (form.errors ржП ржерж╛ржХрзЗ)     | ржПржЦрж╛ржирзЗ error raise ржХрж░рждрзЗ рж╣рзЯ ржмрж╛ `self.add_error()` ржжрж┐рзЯрзЗ ржжрж┐рждрзЗ рж╣рзЯ |
| тЬЕ ржмрзНржпржмрж╣рж╛рж░ ржЙржжрж╛рж╣рж░ржг   | `form.cleaned_data['email']`                 | password ржПржмржВ confirm_password ржорж┐рж▓ ржЖржЫрзЗ ржХрж┐ржирж╛ ржЪрзЗржХ ржХрж░рж╛           |

---

### ЁЯОп 5. `self.add_error()` vs `raise ValidationError`

| ржмрж┐рж╖рзЯ                     | `self.add_error()`                                                                                                    | `raise ValidationError()`                                                      |
| ------------------------ | --------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| **ржкрзНрж░ржХрзГрждрж┐**              | Form ржмрж╛ ModelForm ржПрж░ method, validation error ржпрзБржХрзНржд ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ                                              | Exception ржпрж╛ validation error рж╣рж┐рж╕рзЗржмрзЗ ржЙржарж╛ржирзЛ рж╣рзЯ                                  |
| **ржмрзНржпржмрж╣рж╛рж░ ржХрзНрж╖рзЗрждрзНрж░**      | рж╕рж╛ржзрж╛рж░ржгржд `clean()` method ржмрж╛ `clean_<fieldname>()` method ржПрж░ ржоржзрзНржпрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж┐рж▓рзНржб ржмрж╛ ржкрзБрж░рзЛ ржлрж░рзНржорзЗ error ржпрзБржХрзНржд ржХрж░рж╛рж░ ржЬржирзНржп | field-level ржмрж╛ form-level validation ржП error ржШржЯрж▓рзЗ exception рж╣рж┐рж╕рзЗржмрзЗ ржЙржарж╛рждрзЗ рж╣рзЯ    |
| **ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░**          | рзиржЯрж┐ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ ржирзЗрзЯ: (field_name (string ржмрж╛ None), error_message)                                                     | рж╕рж╛ржзрж╛рж░ржгржд error message ржмрж╛ error list ржирзЗрзЯ                                        |
| **Error target**         | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ field ржПрж░ error рж╣рж┐рж╕рзЗржмрзЗ ржЕржержмрж╛ ржкрзБрж░рзЛ ржлрж░рзНржорзЗрж░ error рж╣рж┐рж╕рзЗржмрзЗ ржпрзБржХрзНржд ржХрж░рждрзЗ ржкрж╛рж░рзЗ (`field_name=None` ржжрж┐рж▓рзЗ ржлрж░рзНржо error)     | рж╕рж╛ржзрж╛рж░ржгржд ржкрзБрж░рзЛ form ржПрж░ validation error рж╣рж┐рж╕рж╛ржмрзЗ ржмрж┐ржмрзЗржЪрж┐ржд рж╣рзЯ                        |
| **Form validation flow** | error ржпрзЛржЧ ржХрж░рж▓рзЗржУ form ржПрж░ validation process ржЪрж▓рждрзЗ ржерж╛ржХрзЗ, ржЖржкржирж┐ ржПржХрж╛ржзрж┐ржХ error add ржХрж░рждрзЗ ржкрж╛рж░рзЗржи                                | ValidationError ржЙржарж╛ржирзЛ рж╣рж▓рзЗ validation рждрзОржХрзНрж╖ржгрж╛рзО ржерзЗржорзЗ ржпрж╛рзЯ, ржкрж░рзЗрж░ ржХрзЛржб execute рж╣рзЯ ржирж╛ |
| **Template ржП access**    | form.errors ржП ржпрзБржХрзНржд рж╣рзЯ, ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж┐рж▓рзНржбрзЗрж░ errors рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯ                                                      | form.errors ржП ржЖрж╕рзЗ, рж╕рж╛ржзрж╛рж░ржгржд form-level error рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯ                    |
| **ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?**   | ржПржХрж╛ржзрж┐ржХ field ржПрж░ ржЬржирзНржп error ржпрзЛржЧ ржХрж░рждрзЗ ржЪрж╛ржи, validation ржЪрж▓рж╛ржХрж╛рж▓рзАржи ржПржХрж╛ржзрж┐ржХ error ржжрзЗржЦрждрзЗ ржЪрж╛ржи                                   | ржПржХржХ critical error ржкрзЗрж▓рзЗ validation ржерж╛ржорж┐рзЯрзЗ ржжрж┐рждрзЗ ржЪрж╛ржи                             |

---

### ЁЯОп 6. `self.method()` vs `super().method()`

- `self.method()` тЖТ ржирж┐ржЬрзЗрж░ method ржЖржЧрзЗ ржЦрзБржБржЬржмрзЗ, ржирж╛ ржкрзЗрж▓рзЗ parent-ржП ржпрж╛ржмрзЗред
- `super().method()` тЖТ рж╕рж░рж╛рж╕рж░рж┐ parent-ржПрж░ method ржХрж▓ ржХрж░рзЗред

**Form ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ:**

```python
def clean(self):
    data = super().clean()  # super ржжрж┐рзЯрзЗ parent clean() call
```

---

### ЁЯОп 7. Form Widget Customize

ЁЯСЙЁЯП┐Modelform

```python
class ProductForm(forms.ModelForm):
    class Meta:
        model = Product
        fields = ['title', 'price']
        widgets = {
            'title': forms.TextInput(attrs={'class': 'form-control'}),
            'price': forms.NumberInput(attrs={'class': 'form-control'}),
        }
        labels = {
            'title': 'Product Name',
        }

```

ЁЯСЙ customform

```pthon
class MyForm(forms.Form):
    name = forms.CharField(labels='Product Name',widget=forms.TextInput(attrs={
        'class': 'form-control',
        'placeholder': 'Enter Name'
    }))
```

### ЁЯОп 8. BoundField ржПржмржВ `form['field']`

ЁЯФ╕ `form['field']` тЖТ BoundField object return ржХрж░рзЗред

ЁЯФ╕ BoundField object ржПрж░ `__str__` method ржЖржЫрзЗ ржпрж╛ template ржП `<input ...>` element render ржХрж░рзЗред

ЁЯФ╕ рждрж╛ржЗ template ржП `{{ form.field }}` ржмрж╛ `{{ form.field.errors }}` рж▓рж┐ржЦрж▓рзЗржЗ ржХрж╛ржЬ рж╣ржпрж╝ред

ЁЯФ╕ ржпржЦржи ржЯрзЗржорзНржкрж▓рзЗржЯ ржП ржЕржмржЬрзЗржХрзНржЯ ржмрж╛ dict ржХрж▓ ржХрж░рж╛ рж╣рзЯ рждржЦржи ржкрж╛ржЗржержи ржЕржЯрзЛржорзЗржЯрж┐ржХ рждрж╛рж░ str ржорзЗржержб ржХрж▓ ржХрж░рзЗ ржлрж░рзНржо ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ
ржПрж░ **str** ржорзЗржержб as_table method call ржХрж░рзЗ рждрж╛ржЗ ржЖржорж░рж╛ {{form}} рж▓рж┐ржЦрж▓рзЗ ржПржЯрж╛ рждрж╛рж░ str ржХрж▓ рж╣рзЯрзЗ as_table ржЖржХрж╛рж░рзЗ
рж░рзЗржирзНржбрж╛рж░ рж╣рзЯредржмрж╛рж╕рзНрждржмрзЗ form ржмрж╛ form.field рж╣рж▓рзЛ boundre_field object ржпрзЗржЦрж╛ржирзЗ ржЕржирзЗржХ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ ржУ ржорзЗржержб ржерж╛ржХрзЗ
ржпрзЗржоржи form.field.error ржПржХржЯрж╛ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ form.field.label_tag ржПржХржЯрж╛ property .

---

### ЁЯОп 9. `form.fields`

ЁЯФ╕ ржПржЯрж╛ ржПржХржЯрж╛ Dictionary ржпрж╛ `{ field_name: Field object }` ржЖржХрж╛рж░рзЗ ржерж╛ржХрзЗред ЁЯФ╕ рж╢рзБржзрзБржорж╛рждрзНрж░ raw Field Object
(CharField, IntegerField etc) access ржПрж░ ржЬржирзНржпред ЁЯФ╕ ржПржЯрж╛ Template ржП ржЗржЙржЬ рж╣рзЯ ржирж╛; template ржП ржЖржорж░рж╛
`form[field_name]` ржЗржЙржЬ ржХрж░рж┐ред

---

### ЁЯОп 10. Form Internal Structure Summary:

```python
form = MyForm()
form.fields         # dict of {name: Field instance}
form['name']        # BoundField object (renderable)
form.cleaned_data   # validated data dict (after is_valid())
form.errors         # dict of errors (after is_valid())
```

```python
# BoundField ржПрж░ ржорзВрж▓ржд ржПржЯрж╛
class BoundField:
    def __str__(self):
        return self.as_widget()
```

---

### ЁЯОп 11. Dunder Method `__getitem__`

```python
class Form:
    def __getitem__(self, name):
        return BoundField(self, self.fields[name], name)
```

ЁЯФ╕ ржПржЬржирзНржп ржЖржорж░рж╛ form\['field_name'] рж▓рж┐ржЦрж▓рзЗ рж╕рзЗ BoundField return ржХрж░рзЗред

---

### ЁЯОп 12. Template rendering & Styling

ЁЯФ╕ Custom HTML form ржП Bootstrap рж╕рж╣ styling ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ:

```html
<form method="POST">
  {% csrf_token %}
  <div class="mb-3">{{ form.name.label_tag }} {{ form.name }} {{ form.name.errors }}</div>
</form>
```

---

### ЁЯОп 13. Form Rendering Process:

| Step | Action                                                                                             |
| ---- | -------------------------------------------------------------------------------------------------- |
| 1    | Request ржЖрж╕рзЗ form page ржП                                                                            |
| 2    | GET рж╣рж▓рзЗ blank form render ржХрж░рзЗ                                                                      |
| 3    | POST рж╣рж▓рзЗ `MyForm(request.POST)` instantiate ржХрж░рзЗ                                                    |
| 4    | `is_valid()` call рж╣рзЯ                                                                               |
| 5    | Valid рж╣рж▓рзЗ `cleaned_data` dict ржЖрж╕рзЗ ржПрж░ржкрж░ рж╕рзЗржн ржжрж┐рж▓рзЗ рждрж╛ model.object.create() ржЪрж╛рж▓рж┐рзЯрзЗ ржЕржмржЬрзЗржХрзНржЯ ржХрзНрж░рж┐ржЯрзЗ ржХрж░рзЗ |
| 6    | Template ржП BoundField ржПрж░ ржорж╛ржзрзНржпржорзЗ render рж╣рзЯ                                                         |
| 7    | Error рж╣рж▓рзЗ error dict `form.errors` render рж╣рзЯ                                                       |

---

## ЁЯФЪ Conclusion:

ржПржЗ handnote ржЯрж┐рждрзЗ Django Form Handling ржПрж░ almost рж╕ржм ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрж┐рж╖ржпрж╝ ржЖрж▓рзЛржЪржирж╛рж░ ржнрж┐рждрзНрждрж┐рждрзЗ рж▓рж┐ржкрж┐ржмржжрзНржз ржХрж░рж╛
рж╣ржпрж╝рзЗржЫрзЗред Future ржП ржПржХржмрж╛рж░ ржкржбрж╝рж▓рзЗржЗ рж╕ржм clear рж╣ржмрзЗ, ржПржмржВ ржПржЯрж╛ рж░рж┐ржнрж┐рж╢ржирзЗрж░ ржЬржирзНржп ржкрж╛рж░ржлрзЗржХрзНржЯред

## ЁЯНк тЬЕ Day 7: Authentication System

- Session authentication
- Django built-in auth
- Register, Login, Logout view
- login_required, messages

### ЁЯза рзз. Cookie ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

### тЬЕ Server ржерзЗржХрзЗ Cookie set:

```http
HTTP/1.1 200 OK
Set-Cookie: sessionid=abc123xyz; Path=/; HttpOnly
```

тЮбя╕П ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржмрзБржЭрзЗ ржпрж╛ржпрж╝ ржПржЯрж┐ ржПржХржЯрж┐ ржХрзБржХрж┐ ржПржмржВ рж╕рзЗржЯрж┐ рждрж╛рж░ internal cookie store-ржП рж╕рзЗржн ржХрж░рзЗред

### тЬЕ ржкрж░ржмрж░рзНрждрзА Request ржП:

```http
GET /dashboard HTTP/1.1
Host: example.com
Cookie: sessionid=abc123xyz
```

тЮбя╕П ржмрзНрж░рж╛ржЙржЬрж╛рж░ рж╕рзЗржЗ ржХрзБржХрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯред

### тЬЕ Cookie ржкрж╛ржарж╛ржирзЛрж░ рж╢рж░рзНржд:

| рж╢рж░рзНржд         | ржмрзНржпрж╛ржЦрзНржпрж╛                                       |
| ------------ | ---------------------------------------------- |
| Domain match | ржХрзБржХрж┐ ржпрзЗржЗ ржбрзЛржорзЗржЗржи ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ, рж╕рзЗржЗ ржбрзЛржорзЗржЗржирзЗ ржкрж╛ржарж╛ржмрзЗ |
| Path match   | ржХрзБржХрж┐ ржпрзЗржЗ path ржПрж░ ржЬржирзНржп рж╕рзЗржЯ, рж╕рзЗржЗ path-ржП ржкрж╛ржарж╛ржмрзЗ   |
| Secure       | рж╢рзБржзрзБржорж╛рждрзНрж░ HTTPS ржПрж░ ржЬржирзНржп ржкрж╛ржарж╛ржмрзЗ                 |
| HttpOnly     | JavaScript access ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛                |

### ЁЯФР рзи. Cookie ржжрж┐рзЯрзЗ Session ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

1. **User Login ржХрж░рж▓рзЗ**, Django ржПржХржЯрж╛ `sessionid` ржХрзБржХрж┐ рж╕рзЗржЯ ржХрж░рзЗред
2. ржПржЗ ржХрзБржХрж┐ ржмрзНрж░рж╛ржЙржЬрж╛рж░ рж╕рзЗржн ржХрж░рзЗ ржПржмржВ ржкрж░ржмрж░рзНрждрзА рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ ржкрж╛ржарж╛рзЯред
3. Django ржПржЗ ржХрзБржХрж┐ ржжрзЗржЦрзЗ ржмрзБржЭрзЗ ржлрзЗрж▓рзЗ user ржХрзЗред
4. Django backend-ржП `/sessions/` table ржмрж╛ Redis-ржП session data рж░рж╛ржЦрзЗред

---

### ЁЯФР Django Authentication System

### ЁЯз╛ рзй. Built-in Auth Views

### тЬЕ Registration View:

```python
from django.contrib.auth.models import User

def register(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        User.objects.create_user(username=username, password=password)
        return redirect('login')
    return render(request, 'register.html')
```

### тЬЕ Login View:

```python
from django.contrib.auth import authenticate, login

def user_login(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if user is not None:
            login(request, user)  # Session рж╢рзБрж░рзБ рж╣рзЯ ржПржЦрж╛ржирзЗ
            return redirect('dashboard')
    return render(request, 'login.html')
```

### тЬЕ Logout View:

```python
from django.contrib.auth import logout

def user_logout(request):
    logout(request)  # reuest ржПрж░ ржЬржирзНржп sessionid ржирж┐рзЯрзЗ ржУржЗ ржЗржЙрж╕рж╛рж░ ржПрж░  Session Destroy ржХрж░рзЗ django ржПрж░ рж╕рзЗрж╢ржи ржбрж┐ржмрж┐ ржерзЗржХрзЗ ржПржирзНржб ржмрзНрж░ржорзЗрж░ ржПрж░ sessionid cookey null/remove  ржХрж░рзЗ ржжрзЗрзЯ
    return redirect('login')
```

---

### ЁЯЧВя╕П рзк. Session Authentication

тЬЕ Django session-based authentication ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

| ржзрж╛ржк | ржмрзНржпрж╛ржЦрзНржпрж╛                                  |
| --- | ----------------------------------------- |
| 1   | Login ржХрж░рж▓рзЗ session рждрзИрж░рж┐ рж╣рзЯ                |
| 2   | Django ржХрзБржХрж┐рждрзЗ `sessionid` ржкрж╛ржарж╛рзЯ           |
| 3   | ржмрзНрж░рж╛ржЙржЬрж╛рж░ рж╕рзЗржЗ ржХрзБржХрж┐ ржкрж╛ржарж╛рзЯ ржкрзНрж░рждрж┐ request ржП   |
| 4   | Django рж╕рзЗржЗ sessionid ржжрзЗржЦрзЗ user рж╕ржирж╛ржХрзНржд ржХрж░рзЗ |

---

ЁЯФД Diagram (рж╕ржВржХрзНрж╖рж┐ржкрзНржд)

```text
User Login тЖТ login(request, user)
              тЖУ
           session.save() тЖТ DB/session backend as {sessionid:xyz,user_id,abc, authentication_backend:"your auth backend setup"}
              тЖУ
           Set-Cookie: sessionid=xyz тЖР to browser

тЖТ User sends next request
     тЖУ
   Cookie: sessionid=xyz тЖР comes with request
     тЖУ
  SessionMiddleware gets session object from sesson DB by this sessionid cookey
     тЖУ
  AuthenticationMiddleware тЖТ
 get user object by sesson object user_id property and set
request.user = User instance

```

## ЁЯЫС рзл. @login_required,@user_passes_test Decorator and lamda

```python
from django.contrib.auth.decorators import login_required

@login_required
def dashboard(request):
    return render(request, 'dashboard.html')
```

тЮбя╕П ржПржЗ ржбрзЗржХрзЛрж░рзЗржЯрж░ check ржХрж░рзЗ user logged in ржХрж┐ржирж╛ред ржирж╛ ржерж╛ржХрж▓рзЗ login page ржП рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржХрж░рзЗред

## ЁЯза `lambda` & `@user_passes_test` in Django (Handnote)

---

### тЬЕ `lambda` in Python

#### ЁЯФ╣ ржХрзА?

`lambda` рж╣рж▓рзЛ Python-ржПрж░ anonymous (ржирж╛ржорж╣рзАржи) ржПржХ рж▓рж╛ржЗржирзЗрж░ ржлрж╛ржВрж╢ржиред

#### ЁЯФ╣ Syntax:

```python
lambda arguments: expression
```

#### ЁЯФ╣ ржЙржжрж╛рж╣рж░ржг:

```python
add = lambda a, b: a + b
print(add(3, 5))  # Output: 8
```

#### ЁЯФ╣ ржмрзНржпржмрж╣рж╛рж░:

- ржЫрзЛржЯ ржлрж╛ржВрж╢ржи ржмрж╛ expression
- `map()`, `filter()`, `sorted()`, `decorator`, ржЗрждрзНржпрж╛ржжрж┐рж░ ржоржзрзНржпрзЗ
- ржХрзЛржерж╛ржпрж╝ ржПржХржмрж╛рж░рзЗрж░ ржЬржирзНржпрзЛ ржлрж╛ржВрж╢ржи рж▓рж╛ржЧрж▓рзЗ

#### ЁЯФ╣ Practical Example:

```python
squared = list(map(lambda x: x * x, [1, 2, 3]))
# Output: [1, 4, 9]
```

---

### тЬЕ `@user_passes_test` in Django

#### ЁЯФ╣ ржХрзА?

`@user_passes_test` рж╣ржЪрзНржЫрзЗ Django ржПрж░ ржПржХржЯрж╛ **decorator** ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЖржкржирж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ test ржжрж┐рзЯрзЗ **view
access control** ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

#### ЁЯФ╣ Syntax:

```python
from django.contrib.auth.decorators import user_passes_test

@user_passes_test(lambda u: u.is_superuser)
def my_view(request):
    ...
```

#### ЁЯФ╣ lambda u: u.is_superuser

ржПржЦрж╛ржирзЗ:

- `u` рж╣рж▓рзЛ `request.user`
- ржПржЯрж┐ check ржХрж░рзЗ user superuser ржХрж┐ ржирж╛

#### ЁЯФ╣ ржмрж┐ржХрж▓рзНржкржнрж╛ржмрзЗ (function ржжрж┐рзЯрзЗ):

```python
def is_admin(user):
    return user.is_superuser

@user_passes_test(is_admin)
def dashboard(request):
    ...
```

---

### ЁЯУМ ржХрзЛржерж╛рзЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм?

- ржпрзЗрж╕ржм view-рждрзЗ ржЖржкржирж┐ ржЪрж╛ржи **рж╢рзБржзрзБ logged in user ржмрж╛ specific user type (admin/staff)** access ржХрж░рзБржХ
- Example:

  - `@user_passes_test(lambda u: u.is_authenticated)`
  - `@user_passes_test(lambda u: u.is_staff)`
  - `@user_passes_test(lambda u: u.is_superuser)`
  - `@user_passes_test(lambda u: u.is_active)`

---

### ЁЯЪл Access ржирж╛ ржкрзЗрж▓рзЗ ржХрзА рж╣рзЯ?

Default-ржнрж╛ржмрзЗ user рж╢рж░рзНржд ржирж╛ ржорж╛ржирж▓рзЗ рждрж╛ржХрзЗ **login page ржП redirect** ржХрж░рж╛ рж╣рзЯред рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ custom redirect
URL ржУ ржжрж┐рждрзЗ ржкрж╛рж░рзЛ:

```python
@user_passes_test(lambda u: u.is_superuser, login_url='/no-access/')
```

---

### ЁЯж╛ рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржирж┐рзЯржо:

| ржмрж┐рж╖ржпрж╝               | ржХрж╛ржЬ              | ржмрзНржпржмрж╣рж╛рж░             |
| ------------------- | ---------------- | ------------------- |
| `lambda`            | ржПржХ рж▓рж╛ржЗржирзЗрж░ ржлрж╛ржВрж╢ржи  | Python & callback   |
| `@user_passes_test` | User ржХрзЗ test ржХрж░рзЗ | Django view control |

---

### тЬЕ Common Example:

```python
from django.contrib.auth.decorators import user_passes_test

@user_passes_test(lambda user: user.is_authenticated)
def profile_view(request):
    ...
```

---

## ЁЯЦЪ рж╢рзЗрж╖ ржХржерж╛:

- **`lambda`** тЖТ ржЫрзЛржЯ ржлрж╛ржВрж╢ржирзЗрж░ рж╢рж░рзНржЯржХрж╛рж░рзНржЯ
- **`@user_passes_test`** тЖТ view ржХрзЗ protect ржХрж░рж╛рж░ tool
- ржжрзБржЯрзЛржЗ powerful & Pythonic ЁЯРН

---

## ЁЯТм рзм. Django Messages Framework

### тЬЕ ржЙржжрж╛рж╣рж░ржг:

```python
from django.contrib import messages
from django.shortcut import redirect

def login_view(request):
    if request.method == 'POST':
        # ...
        if user is not None:
            login(request, user)
            messages.success(request, 'Login successful!')
            return redirect("messages")

        else:
            messages.error(request, 'Invalid credentials')
            return redirect("messages")
```

### тЬЕ template ржП ржжрзЗржЦрж╛рждрзЗ:

```html
{% for message in messages %}
<div class="alert">{{ message }}</div>
{% endfor %}
```

---

### `тЬЕ рж╕ржм ржорзЗржержб + ржХржорж╛ржирзНржб ржПржмржВ ржПржЧрзБрж▓рж╛рж░ ржХрж╛ржЬ`

| ржмрж┐рж╖рзЯ                                                            | ржХрж╛ржЬ                                                                                                                                                                                                                                                                                                                |
| --------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Cookie                                                          | ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржбрзЗржЯрж╛ рж╕ржВрж░ржХрзНрж╖ржгрзЗрж░ ржорж╛ржзрзНржпржо                                                                                                                                                                                                                                                                 |
| Set-Cookie                                                      | Server -> Browser: ржХрзБржХрж┐ рж╕рзЗржЯ ржХрж░рж╛рж░ ржХржорж╛ржирзНржб                                                                                                                                                                                                                                                                            |
| Cookie header                                                   | Browser -> Server: ржХрзБржХрж┐ ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп                                                                                                                                                                                                                                                                               |
| Session                                                         | Server-side storage, user ржХрзЗ track ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ                                                                                                                                                                                                                                                                |
| login()                                                         | Django session рж╢рзБрж░рзБ/make ржХрж░рзЗ, ржХрзБржХрж┐ рж╕рзЗржЯ ржХрж░рзЗ set_cookey ржжрж┐рзЯрж╛ ржПржмржВ sesssion middleware ржкрзНрж░рждрж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЕржирзБржпрж╛рзЯрзА рждрж╛рж░ ржоржзрзНржпрзЗ ржмрзНрж░рж╛ржЙрж╕рж╛рж░ ржерзЗржХрзЗ ржкрж╛ржарж╛ржирзЛ sessionid ржХрзБржХрж┐ ржЕржирзБржпрж╛рзЯрзА django sesson ржбрж┐ржмрж┐ рж╣рждрзЗ ржЗржЙрж╕рж╛рж░ fetch ржХрж░рзЗ request.user ржП рж╕рзЗржЗ user ржЕржмржЬрзЗржХрзНржЯ ржкрж╛ржарж╛рзЯ рждрж╛ржЗ ржЖржорж░рж╛ template ржП request.user.username ржжрж┐рж▓рзЗ рж▓ржЧржЗржи ржЗржЙрж╕рж╛рж░ ржПрж░ ржирж╛ржо ржкрж╛ржЗ |
| logout(request)                                                 | request ржЕржмржЬрзЗржХрзНржЯ ржП ржерж╛ржХрж╛ sessionid ржПрж░ ржЬржирзНржп ржпрзЗржЗ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ рж╕рзЗрж╢ржи ржП ржЖржЪрзЗ рж╕рзЗржЗ Session ржЕржмржЬрзЗржХрзНржЯ destroy ржХрж░рзЗред ржХрж░рзЗ                                                                                                                                                                                                           |
| authenticate(request,username="something",password="something") | authenticate ржХрж░рзЗ ржпржжрж┐ ржПржЗ ржЗржиржлрж░ржорзЗрж╢ржи ржП ржХрзЛржи ржЗржЙрж╕рж╛рж░ ржкрж╛рзЯ рждрж╛рж╣рж▓рзЗ User object return ржХрж░рзЗ ржирж╛ рж╣рж▓рзЗ none return ржХрж░рзЗ                                                                                                                                                                                                               |
| @login_required(login_url="loginpage")                          | Authenticated user ржирж╛ рж╣рж▓рзЗ redirect ржХрж░рзЗ login_url ржП ржпрзЗржЗ ржЗржЙржЖрж░ржПрж▓ thake рж╕рзЗржЦрж╛ржирзЗ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржХрж░рзЗред                                                                                                                                                                                                                         |
| messages                                                        | User feedback display ржХрж░рждрзЗ flash ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛рзЯ рж░рж┐ржЯрж╛рж░рзНржи ржкрзЗржЬ ржП ржпрж╛ ржПржХржмрж╛рж░ ржПрж░ ржЬржирзНржп ржжрзЗржЦрж╛рзЯ ржПржирзНржб ржПржЯрж╛ рж╕рзЗрж╢ржи ржмрзЗрж╕ржб рждрж╛ржЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЕржмржЬрзЗржХрзНржЯ ржкрж╛ржарж╛рждрзЗ рж╣рзЯ ржПржХржмрж╛рж░ рж╢рзЛ ржХрж░рж▓рзЗ рж╕рзЗрж╢ржи ржерзЗржХрзЗ ржбрзЗрж╕рзНржЯрзНрж░рзЯ рж╣рзЯ ржЖрж░ рж╕рзАржи ржирж╛ ржХрж░рж╛ ржкрж░рзНржпржирзНржд рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рж▓рзЗржУ ржорзЗрж╕рзЗржЬ ржерзЗржХрзЗржЗ ржпрж╛рзЯред                                                                                      |

---


# тЬЕ Django Custom User Model Handnote (Day 08)

## ЁЯФ░ Custom User Model ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм?

Django-ржПрж░ default user model ржЕржирзЗржХ рж╕ржорзЯ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рзЯрзЛржЬржи ржЕржирзБржпрж╛рзЯрзА field (ржпрзЗржоржи: phone\_number, profile\_image ржЗрждрзНржпрж╛ржжрж┐) рж░рж╛ржЦрж╛рж░ рж╕рзБржпрзЛржЧ ржжрзЗрзЯ ржирж╛ред рждрж╛ржЗ ржЖржорж░рж╛ custom user model ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ ржпрж╛рждрзЗ user model ржирж┐ржЬрзЗрж░ ржорждрзЛ modify ржХрж░рж╛ ржпрж╛рзЯред

---

## ЁЯФ╣ AbstractUser vs AbstractBaseUser

| Topic           | AbstractUser                           | AbstractBaseUser                  |
| --------------- | -------------------------------------- | --------------------------------- |
| Inherits        | Django's built-in User model           | Only Base user class              |
| Fields          | Default fields (username, email, etc.) | Must define all fields manually   |
| Easier to use?  | тЬЕ рж╣рзНржпрж╛ржБ (prebuilt features ржкрзЗрзЯрзЗ ржпрж╛ржм)   | тЭМ ржирж╛ (рж╕ржм manually define ржХрж░рждрзЗ рж╣рзЯ) |
| Password System | Built-in ржЖржЫрзЗ                           | ржирж┐ржЬрзЗ implement ржХрж░рждрзЗ рж╣рзЯ            |

---

## ЁЯФ╣ Custom User Model ржП ржХрзА ржХрзА ржерж╛ржХрждрзЗ рж╣ржмрзЗ?

1. AbstractUser ржерзЗржХрзЗ extend ржХрж░рж╛ Model:

```python
class CustomUser(AbstractUser):
    phone_number = models.CharField(max_length=20)
    profile_image = models.ImageField(upload_to='profile/', blank=True, null=True)
```

2. Custom Manager рждрзИрж░рж┐ ржХрж░рждрзЗ рж╣ржмрзЗ:

```python
class CustomUserManager(BaseUserManager):
    def create_user(self, username, email, password=None, **extra_fields):
        if not email:
            raise ValueError('Users must have an email address')
        email = self.normalize_email(email)
        user = self.model(username=username, email=email, **extra_fields)
        user.set_password(password)
        user.save(using=self._db)
        return user

    def create_superuser(self, username, email, password=None, **extra_fields):
        extra_fields.setdefault('is_superuser', True)
        extra_fields.setdefault('is_staff', True)
        return self.create_user(username, email, password, **extra_fields)
```

3. Custom User Model ржП Manager ржпрзБржХрзНржд ржХрж░рждрзЗ рж╣ржмрзЗ:

```python
class CustomUser(AbstractUser):
    phone_number = models.CharField(max_length=20)
    profile_image = models.ImageField(upload_to='profile/', blank=True, null=True)

    objects = CustomUserManager()  # Custom Manager ржпрзБржХрзНржд ржХрж░рж╛ рж╣рж▓рзЛ
```

4. settings.py ржП ржЬрж╛ржирж╛рждрзЗ рж╣ржмрзЗ:

```python
AUTH_USER_MODEL = 'yourapp.CustomUser'
```

---


## Django Profile Page

````markdown
# Django Profile Page рждрзИрж░рж┐рж░ ржЧрж╛ржЗржб (request.user ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ)

## ржнрзВржорж┐ржХрж╛
ржПржЗ ржЧрж╛ржЗржбрзЗ рж╢рзЗржЦрж╛ржирзЛ рж╣ржмрзЗ ржХрж┐ржнрж╛ржмрзЗ Django ржПрж░ built-in `request.user` ржЕржмржЬрзЗржХрзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЬржи рж▓ржЧржЗржиржХрзГржд ржЗржЙржЬрж╛рж░рзЗрж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржкрзЗржЬ рждрзИрж░рж┐ ржХрж░рж╛ ржпрж╛рзЯред

---

## рзз. URL Configuration

ржкрзНрж░ржержорзЗ рждрзЛржорж╛рж░ `urls.py` ржлрж╛ржЗрж▓рзЗ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржкрзЗржЬрзЗрж░ URL ржПржирзНржЯрзНрж░рж┐ ржжрж┐рждрзЗ рж╣ржмрзЗ:

```python
from django.urls import path
from . import views

urlpatterns = [
    path('profile/', views.profile_view, name='profile'),
]
````

---

## рзи. View Function

`views.py` ржлрж╛ржЗрж▓рзЗ `profile_view` ржлрж╛ржВрж╢ржи рждрзИрж░рж┐ ржХрж░рзЛ:

```python
from django.shortcuts import render
from django.contrib.auth.decorators import login_required

@login_required  # ржирж┐рж╢рзНржЪрж┐ржд ржХрж░ржмрзЗ ржЗржЙржЬрж╛рж░ рж▓ржЧржЗржи ржЖржЫрзЗ
def profile_view(request):
    user = request.user
    context = {
        'user': user,
    }
    return render(request, 'profile.html', context)
```

---

## рзй. Template ржлрж╛ржЗрж▓ (profile.html)

`templates` ржлрзЛрж▓рзНржбрж╛рж░рзЗ `profile.html` рждрзИрж░рж┐ ржХрж░рзЛ:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>{{ user.username }} ржПрж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓</title>
</head>
<body>
    <h1>ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржкрзЗржЬ</h1>
    <p><strong>ржирж╛ржо:</strong> {{ user.get_full_name }}</p>
    <p><strong>ржЗржорзЗржЗрж▓:</strong> {{ user.email }}</p>
    <p><strong>ржЗржЙржЬрж╛рж░ржирзЗржо:</strong> {{ user.username }}</p>
    <!-- ржкрзНрж░рзЯрзЛржЬржиржорждрзЛ ржЖрж░ржУ ржлрж┐рж▓рзНржб ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЛ -->
</body>
</html>
```

---

## рзк. Authentication Setup

* ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЛ рждрзЛржорж╛рж░ settings.py-рждрзЗ `LOGIN_URL` рж╕ржарж┐ржХ ржЖржЫрзЗ (ржпрзЗржоржи: `/accounts/login/`)
* рж▓ржЧржЗржи ржЫрж╛рзЬрж╛ ржХрзЗржЙ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржкрзЗржЬрзЗ ржпрзЗрждрзЗ ржирж╛ ржкрж╛рж░рзЗ ржПржЬржирзНржп `@login_required` ржбрзЗржХрзЛрж░рзЗржЯрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

---

### рж╣рзНржпрж╛ржирзНржбржирзЛржЯ (Handnote)
```html
<div style="border:1px solid #ccc; padding:10px; background:#f9f9f9; position: relative;">
<h3>Quick Tips</h3>
<pre id="handnote-text" style="white-space: pre-wrap; word-wrap: break-word;">
1. ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржкрзЗржЬ рж╢рзБржзрзБржорж╛рждрзНрж░ рж▓ржЧржЗржи ржХрж░рж╛ ржЗржЙржЬрж╛рж░рзЗрж░ ржЬржирзНржпред
2. request.user ржжрж┐рзЯрзЗ рж╕рж╣ржЬрзЗржЗ ржЗржЙржЬрж╛рж░рзЗрж░ ржбрж╛ржЯрж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛рзЯред
3. @login_required ржбрзЗржХрзЛрж░рзЗржЯрж░ ржЗржЙржЬрж╛рж░ржХрзЗ рж▓ржЧржЗржи ржХрж░рж╛рждрзЗ ржмрж╛ржзрзНржп ржХрж░рзЗред
4. user.get_full_name() ржирж╛ржо ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред
5. ржЗржорзЗржЗрж▓, ржЗржЙржЬрж╛рж░ржирзЗржо рж╕ржм ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ request.user ржерзЗржХрзЗред
</pre>
<button id="copy-btn" style="position: absolute; top: 10px; right: 10px; padding: 4px 10px; cursor: pointer;">Copy</button>
</div>

<script>
  document.getElementById('copy-btn').addEventListener('click', function() {
    const text = document.getElementById('handnote-text').innerText;
    navigator.clipboard.writeText(text).then(() => {
      alert('Handnote copied!');
    }).catch(() => {
      alert('Copy failed, please copy manually.');
    });
  });
</script>
```

---


## ЁЯФ╣ Model.objects.create vs Model()

| Model.objects.create                   | Model() + save()                     |
| -------------------------------------- | ------------------------------------ |
| Object рждрзИрж░рж┐ ржУ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ DB-рждрзЗ save ржХрж░рзЗ | Object рждрзИрж░рж┐ рж╣рзЯ, ржкрж░рзЗ `save()` ржжрж┐рждрзЗ рж╣рзЯ |
| Internal call ржХрж░рзЗ `.save()`            | Manually `obj.save()` ржжрж┐рждрзЗ рж╣рзЯ        |

---

## ЁЯФ╣ set\_password() ржХрзЛржерж╛ ржерзЗржХрзЗ ржЖрж╕рзЗ?

* ржПржЯрж┐ `AbstractBaseUser` ржПрж░ instance methodред
* ржПрж░ ржорж╛ржзрзНржпржорзЗ password hashed ржХрж░рзЗ save ржХрж░рж╛ рж╣рзЯред

---

## ЁЯФ╣ extra\_fields ржХрж╛ржЬ ржХрзА ржХрж░рзЗ?

```python
extra_fields = {"is_superuser": True, "is_staff": True}
```

* `user = self.model(username, email, **extra_fields)` тЖТ ржПрж░ ржорж╛ржирзЗ:

  ```python
  user = self.model(username=username, email=email, is_superuser=True, is_staff=True)
  ```
* ржПржЯрж┐ dictionary spread ржХрж░рзЗ additional fields assign ржХрж░рзЗред
* Python ржП `**kwargs` тЖТ keyword arguments dict ржЖржХрж╛рж░рзЗ ржирзЗрзЯред

---

## ЁЯФ╣ extra\_fields.setdefault()

* Python dictionary ржПрж░ built-in method

```python
extra_fields.setdefault('is_superuser', True)
```

* ржпржжрж┐ key `is_superuser` ржирж╛ ржерж╛ржХрзЗ рждржмрзЗ `True` set ржХрж░ржмрзЗред

---

## ЁЯФ╣ ValueError ржХрзЛржерж╛ ржерзЗржХрзЗ ржЖрж╕рзЗ?

* Python built-in exceptionред Import ржХрж░рж╛рж░ ржжрж░ржХрж╛рж░ ржирж╛ржЗред

```python
raise ValueError("Users must have an email address")
```

---

## ЁЯФ╣ model manager / object manager ржХрж┐?

* ржкрзНрж░рждрж┐ржЯрж┐ Model ржПрж░ рж╕рж╛ржерзЗ `objects` ржирж╛ржорзЗ default manager ржерж╛ржХрзЗ:

```python
User.objects.all()
User.objects.filter()
```

* ржЖржорж░рж╛ ржЪрж╛ржЗрж▓рзЗ Custom Manager рждрзИрж░рж┐ ржХрж░рзЗ `.objects` override ржХрж░рждрзЗ ржкрж╛рж░рж┐ред
* Custom Query behaviors define ржХрж░рждрзЗ ржкрж╛рж░рж┐ред
* Manager override ржХрж░рж╛рж░ ржЙржжрж╛рж╣рж░ржг:

```python
class ActiveUserManager(models.Manager):
    def get_queryset(self):
        return super().get_queryset().filter(is_active=True)
```

---

## ЁЯФ╣ UserCreationForm extend ржХрж░рж╛рж░ ржХрж╛рж░ржг?

* `UserCreationForm` Django ржПрж░ built-in form ржпрзЗржЯрж╛ automatic ржХрж┐ржЫрзБ validation (`clean_username`, `clean_password2`, etc) provide ржХрж░рзЗред
* Custom User Form рждрзИрж░рж┐ ржХрж░рж╛рж░ рж╕ржорзЯ ржПржЯрж┐ inherit ржХрж░рж▓рзЗ default validation system active ржерж╛ржХрзЗред

---

## ЁЯФ╣ USERNAME\_FIELD vs REQUIRED\_FIELDS

| Field            | ржХрж╛ржЬ                                                      |
| ---------------- | -------------------------------------------------------- |
| USERNAME\_FIELD  | ржХрзЛржи field ржжрж┐рзЯрзЗ user authenticate рж╣ржмрзЗ (default: username) |
| REQUIRED\_FIELDS | createsuperuser ржЪрж▓рж╛ржХрж╛рж▓рзЗ ржпрзЗ fields ржЪрж╛ржЗ рждрж╛ define ржХрж░рж╛      |

```python
USERNAME_FIELD = 'email'
REQUIRED_FIELDS = ['username']
```

---

## ЁЯФ╣ Authentication Backend рж╕рзЗржЯ ржХрж░рж╛:

```python
AUTHENTICATION_BACKENDS = [
    'django.contrib.auth.backends.ModelBackend',
]
```

---

### тЬЕ ржЖржкржирж┐ ржХрж┐ ржмрзБржЭрзЗржЫрзЗржи?

* CustomUser ржХрзЗржи ржжрж░ржХрж╛рж░
* Manager ржХрж┐ ржУ ржХрзЗржи override ржХрж░рждрзЗ рж╣рзЯ
* Model vs Model.objects.create ржкрж╛рж░рзНржержХрзНржп
* set\_password ржПрж░ ржкрзЗржЫржирзЗрж░ ржХрж╛рж╣рж┐ржирзА
* extra\_fields ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ
* CustomUserManager ржХрж┐ ржУ ржХрзЗржи ржжрж░ржХрж╛рж░
* AUTH\_USER\_MODEL ржХрзЛржерж╛рзЯ рж╕рзЗржЯ ржХрж░рждрзЗ рж╣рзЯ

---


---

## тЬЕ Day 9: Middleware & Decorator

- Custom middleware ржХрзА ржПржмржВ ржХрж┐ржнрж╛ржмрзЗ ржмрж╛ржирж╛ржирзЛ ржпрж╛рзЯ
- Custom Decorator ржХрзА ржПржмржВ ржХрж┐ржнрж╛ржмрзЗ ржмрж╛ржирж╛ржирзЛ ржпрж╛рзЯ
- Decorator ржУ Permission based view
### тЬЕ Part 1: Middleware

#### ЁЯза Middleware ржХрзА?

Middleware рж╣рж▓рзЛ Django-ржПрж░ ржПржоржи ржПржХ рж╕рж┐рж╕рзНржЯрзЗржо ржпрзЗржЦрж╛ржирзЗ рждрзБржорж┐ HTTP request ржПржмржВ response ржПрж░ ржорж╛ржЭржЦрж╛ржирзЗ **extra ржХрж╛ржЬ (logic)** ржХрж░рждрзЗ ржкрж╛рж░рзЛред

> ЁЯОп ржоржирзЗ рж░рж╛ржЦрзЛ: Middleware = Request & Response ржПрж░ ржорж╛ржЭржЦрж╛ржирзЗ ржжрж╛ржБрзЬрж┐рзЯрзЗ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛ред

---

#### ЁЯзй Django Middleware ржХржЦржи ржЪрж▓рзЗ?

1. **Request ржЖрж╕рж▓рзЗ** тЖТ Middleware ржЖржЧрзЗ ржЪрж▓рзЗ тЖТ рждрж╛рж░ржкрж░ View ржлрж╛ржВрж╢ржирзЗ ржпрж╛рзЯ
2. **Response рж░рж┐ржЯрж╛рж░рзНржи рж╣рж▓рзЗ** тЖТ Middleware ржЖржмрж╛рж░ ржХрж╛ржЬ ржХрж░рзЗ тЖТ рждрж╛рж░ржкрж░ Client ржП ржкрж╛ржарж╛рзЯ

---

#### ЁЯФз ржХрзЗржи Middleware ржжрж░ржХрж╛рж░?

рждрзБржорж┐ View-ржП ржЕржирзЗржХ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЛ ржарж┐ржХ, ржХрж┐ржирзНрждрзБ Middleware ржПрж░ ржХрж┐ржЫрзБ Extra рж╕рзБржмрж┐ржзрж╛:

| рж╕рзБржмрж┐ржзрж╛                              | ржХрж╛рж░ржг                                  |
| ----------------------------------- | ------------------------------------- |
| Request ржЖрж╕рж╛рж░ ржЖржЧрзЗржЗ check ржХрж░рж╛ ржпрж╛рзЯ     | ржпрзЗржоржи user authenticated ржХрж┐ржирж╛          |
| View execute рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗржЗ ржХрж╛ржЬ ржХрж░рж╛ ржпрж╛рзЯ | IP blacklist ржХрж░рж╛, custom logging      |
| Response modify ржХрж░рж╛ ржпрж╛рзЯ             | HTML footer ржпрзЛржЧ ржХрж░рж╛, CORS header ржжрзЗрзЯрж╛ |
| рж╕ржм View-рж░ ржЖржЧрзЗржЗ ржмрж╛ ржкрж░рзЗ ржХрж╛ржЬ ржХрж░рзЗ       | common ржХрж╛ржЬ ржмрж╛рж░ржмрж╛рж░ ржирж╛ рж▓рж┐ржЦрждрзЗ            |

---

### ЁЯПЧя╕П Custom Middleware ржмрж╛ржирж╛ржирзЛ (Function-Based)

### тЬЕ Step-by-step:

```python
# myapp/middleware.py

def my_middleware(get_response):
    print("ЁЯСЙ Middleware Initialized")

    def middleware(request):
        print("ЁЯФ╣ Request Middleware: view-ржПрж░ ржЖржЧрзЗ")
        response = get_response(request)
        print("ЁЯФ╕ Response Middleware: view-ржПрж░ ржкрж░рзЗ")
        return response

    return middleware
```

#### ЁЯФН ржХрзА ржХрзА ржмрзНржпржмрж╣рж╛рж░ рж╣рж▓рзЛ?

| ржЬрж┐ржирж┐рж╕                              | ржХрж╛ржЬ                                                     |
| ---------------------------------- | ------------------------------------------------------- |
| `get_response`                     | ржПржЯрж╛ рж╣рж▓рзЛ рж╕рзЗржЗ function ржпрзЗржЯрж╛ request ржирж┐рзЯрзЗ View-ржХрзЗ call ржХрж░рзЗ |
| `request`                          | HTTP request object                                     |
| `response = get_response(request)` | View function ржХрзЗ call ржХрж░рзЗ, рждрж╛рж░ result ржзрж░рзЗ               |
| return response                    | Client ржХрзЗ response ржкрж╛ржарж╛рзЯ                                |

---

#### тЪая╕П ржпржжрж┐ `get_response(request)` ржирж╛ ржжрж┐рждрж╛ржо?

View ржХржЦржирзЛржЗ execute рж╣рждрзЛ ржирж╛ред рждрзЛржорж╛рж░ middleware рж╢рзБржзрзБ request ржкрзЗржд, ржХрж┐ржирзНрждрзБ response рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рждрзЛ ржирж╛ тАФ Server рж╣рзНржпрж╛ржВ рж╣рзЯрзЗ ржпрзЗрждред

---

#### ЁЯФЧ settings.py-рждрзЗ ржпрзБржХрзНржд ржХрж░рзЛ:

```python
MIDDLEWARE = [
    ...
    'myapp.middleware.my_middleware',
]
```

---

### ЁЯПЧя╕П Custom Middleware (Class-Based)

#### тЬЕ Syntax:

```python
class MyMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response
        print("ЁЯСЙ Middleware Initialized")

    def __call__(self, request):
        print("ЁЯФ╣ Request Middleware: view-ржПрж░ ржЖржЧрзЗ")
        response = self.get_response(request)
        print("ЁЯФ╕ Response Middleware: view-ржПрж░ ржкрж░рзЗ")
        return response
```

#### ЁЯза ржмрзНржпрж╛ржЦрзНржпрж╛:

| Method         | ржХрж╛ржЬ                                     |
| -------------- | --------------------------------------- |
| `__init__`     | middleware setup рж╣рзЯ ржпржЦржи Django start рж╣рзЯ |
| `get_response` | View ржХрзЗ call ржХрж░рж╛рж░ function              |
| `__call__`     | ржкрзНрж░рждрж┐ржмрж╛рж░ request ржП middleware ржЪрж╛рж▓рж╛рзЯ     |
| `request`      | HTTPRequest object                      |
| `response`     | View ржПрж░ return                          |

---

#### тЭУ ржХрзЗржи `__call__()` рж▓рж╛ржЧрзЗ?

Django middleware instance ржХрзЗ function-ржПрж░ ржорждрзЛ call ржХрж░рзЗ: `middleware_instance(request)`
`__call__` ржирж╛ ржжрж┐рж▓рзЗ, middleware request handle ржХрж░рждрзЗ ржкрж╛рж░рждрзЛ ржирж╛редЁЯСЙ Middleware class ржПрж░ __call__ рж╣рж▓ python  ржПрж░ ржмрж┐рж▓рзНржб ржЗржи ржПржХржЯрж┐ special dunder method ржпрзЗржЯрж╛ class ржПрж░ instance ржХрзЗ function-ржПрж░ ржорждрзЛ call ржХрж░рж╛рж░ ржХрзНрж╖ржорждрж╛ ржжрзЗрзЯредinstance ржХрзЗ ржлрж╛ржВрж╢ржирзЗрж░ ржорждрзЛ call ржХрж░рж▓рзЗ __call__() method execute рж╣рзЯред ржпрж╛ ржПржХржЯрж╛ ржнрж┐ржЙ function рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржбрзЗржХрзЛрж░рзЗржЯрж░ ржпрзЗржоржи ржХрж░рзЗ ржХрж╛рж░ржг ржЖржорж░рж╛ ржЬрж╛ржирж┐ ржпрзЗ middleware ржПржХ ржзрж░ржгрзЗрж░ ржмрж┐рж╢рзЗрж╖ ржбрзЗржХрзЛрж░рзЗржЯрж░ ржпрж╛рж░ рж╕рзНржкрзЗрж╢рж╛рж▓ ржХрж┐ржЫрзБ behave/power  ржЖржЫрзЗред

---

#### ЁЯУМ ржХрзЛржерж╛рзЯ ржХрзЛржи ржХрзЛржб ржЪрж▓рзЗ?

| ржЬрж╛рзЯржЧрж╛                   | ржХрж╛ржЬ                                                |
| ----------------------- | -------------------------------------------------- |
| `__init__()`            | Django server start ржХрж░рж╛рж░ рж╕ржорзЯ ржЪрж▓рзЗ (ржПржХржмрж╛рж░)           |
| `__call__()`            | ржкрзНрж░рждрж┐ржмрж╛рж░ request ржЖрж╕рж▓рзЗ ржЪрж▓рзЗ                          |
| `get_response(request)` | View ржХрзЗ call ржХрж░рзЗ, рждрж╛рж░ржкрж░ view рж╢рзЗрж╖ рж╣рж▓рзЗ ржмрж╛ржХрж┐ code ржЪрж▓рзЗ |

---

#### ЁЯОБ Bonus: Middleware Hook ржЧрзБрж▓рзЛ

Class-based middleware-ржП ржЖрж░ржУ ржХрж┐ржЫрзБ hook ржерж╛ржХрзЗ:

| Method                        | ржХржЦржи ржЪрж▓рзЗ                          | ржХрж╛ржЬ                          |
| ----------------------------- | -------------------------------- | ---------------------------- |
| `process_view()`              | view function execute рж╣ржУржпрж╝рж╛рж░ ржЖржЧрзЗ | view check, arguments change |
| `process_exception()`         | ржпржжрж┐ exception рж╣рзЯ                 | error handle                 |
| `process_template_response()` | template response modify         |                              |

> тЪая╕П ржПржЧрзБрж▓рзЛ рж╢рзБржзрзБ old style middleware-ржП use рж╣рзЯ, Django 1.10+ ржП ржирждрзБржи style рж╣ржЪрзНржЫрзЗ `__init__`, `__call__`

---

---

### тЬЕ Part 2: Decorator

## ЁЯза Decorator ржХрзА?

Decorator рж╣ржЪрзНржЫрзЗ Python-ржПрж░ ржПржХржЯрж╛ ржлрж┐ржЪрж╛рж░, ржпрж╛ **function-ржПрж░ ржЙржкрж░рзЗ ржЖрж░рзЗржХржЯрж╛ function "рж▓рзЗржкрзЗ" ржжрзЗрзЯ**, ржпрзЗржи ржХрж┐ржЫрзБ ржЕрждрж┐рж░рж┐ржХрзНржд ржХрж╛ржЬ рж╣рзЯред

---

## ЁЯОп Django-рждрзЗ ржХрзЗржи Decorator ржжрж░ржХрж╛рж░?

* ржПржХржЯрж╛ view-рж░ ржЖржЧрзЗ/ржкрж░рзЗ ржХрж╛ржЬ ржХрж░рждрзЗ
* User login check ржХрж░рждрзЗ
* Permission check ржХрж░рждрзЗ
* Custom logic add ржХрж░рждрзЗ

---

## ЁЯзй Custom Decorator ржмрж╛ржирж╛ржирзЛ (Step by Step)

### тЬЕ Basic Structure:

```python
from functools import wraps

def my_decorator(view_func):
    @wraps(view_func)
    def wrapper(request, *args, **kwargs):
        print("ЁЯФ╣ View ржПрж░ ржЖржЧрзЗ ржХрж┐ржЫрзБ ржХрж░рж▓рж╛ржо")
        response = view_func(request, *args, **kwargs)
        print("ЁЯФ╕ View ржПрж░ ржкрж░рзЗ ржХрж┐ржЫрзБ ржХрж░рж▓рж╛ржо")
        return response
    return wrapper
```

### ЁЯФН ржмрзНржпрж╛ржЦрзНржпрж╛:

| ржЬрж┐ржирж┐рж╕                      | ржХрж╛ржЬ                                          |
| -------------------------- | -------------------------------------------- |
| `@wraps(view_func)`        | ржорзВрж▓ function-ржПрж░ ржирж╛ржо ржУ docstring ржмржЬрж╛рзЯ рж░рж╛ржЦрзЗ    |
| `request, *args, **kwargs` | Django view function-ржП рж╕ржм argument ржзрж░рж╛рж░ ржЬржирзНржп |
| `view_func(request)`       | ржорзВрж▓ view ржХрзЗ call ржХрж░рзЗ                         |
| return response            | response ржХрзНрж▓рж╛рзЯрзЗржирзНржЯрзЗ ржкрж╛ржарж╛рзЯ                    |

---

### тЬЕ Custom Decorator Use ржХрж░рж╛рж░ ржирж┐рзЯржо:

```python
@my_decorator
def my_view(request):
    return HttpResponse("Hello from view")
```

---

#### тЭУDecorator ржЫрж╛рзЬрж╛ ржХрж┐ рж╕ржорзНржнржм?

рж╣рзНржпрж╛ржБ, ржХрж┐ржирзНрждрзБ ржкрзНрж░рждрж┐ржЯрж╛ view-рждрзЗ ржПржХржЗ code ржмрж╛рж░ржмрж╛рж░ рж▓рж┐ржЦрждрзЗ рж╣рждрзЛред DRY (Don't Repeat Yourself) ржнрж╛ржЩрждред

тЬЕ ржХржЦржи my_decorator() ржЪрж▓рзЗ, ржХржЦржи wrapper() ржЪрж▓рзЗ?

| ржлрж╛ржВрж╢ржи            | ржХржЦржи ржЪрж▓рзЗ                                                           |
| ---------------- | ----------------------------------------------------------------- |
| `my_decorator()` | ржпржЦржи Python рждрзЛржорж╛рж░ view ржХрзЗ decorate ржХрж░рзЗ (server start-ржПрж░ рж╕ржорзЯ ржПржХржмрж╛рж░) |
| `wrapper()`      | ржпржЦржи user request ржХрж░рзЗ ржПржмржВ decorated view call рж╣рзЯ                   |

####  Server start рж╣рж▓рзЗ
- рждрзЛржорж╛рж░ view ржХрзЗ decorate ржХрж░рзЗ (server start-ржПрж░ рж╕ржорзЯ ржПржХржмрж╛рж░)
- Django рждрзЛржорж╛рж░ рж╕ржм middleware read ржХрж░рзЗ (settings.py тЖТ MIDDLEWARE list ржерзЗржХрзЗ)

- ржкрзНрж░рждрж┐ржЯрж┐ middleware ржХрзЗ call ржХрж░рзЗ ржПржХржмрж╛рж░ тЖТ middleware_instance = middleware(get_response)

- ржПрж░ ржорж╛ржирзЗ ржкрзНрж░рждрж┐ржЯрж┐ middleware get_response ржХрзЗ wrap ржХрж░рзЗ ржирждрзБржи ржПржХржЯрж╛ callable return ржХрж░рзЗред


тЮбя╕П рж╕ржм middleware ржПржХржЯрж╛рж░ ржнрзЗрждрж░рзЗ ржЖрж░рзЗржХржЯрж╛ nested рж╣рзЯред


### ЁЯМА Middleware vs Decorator: ржкрж╛рж░рзНржержХрзНржп

| ржжрж┐ржХ                         | Middleware                           | Decorator                              |
| --------------------------- | ------------------------------------ | -------------------------------------- |
| ржмрзНржпржмрж╣рзГржд рж╣рзЯ                  | Django core request/response cycle-ржП | рж╢рзБржзрзБржорж╛рждрзНрж░ view ржлрж╛ржВрж╢ржирзЗрж░ ржЙржкрж░             |
| ржХрзЗ apply ржХрж░рзЗ                | Django ржирж┐ржЬрзЗржЗ (server start-ржП)        | рждрзБржорж┐ ржирж┐ржЬрзЗ ржХрзЛржбрзЗ `@decorator` ржжрж┐рзЯрзЗ       |
| Scope                       | global (рж╕ржм view-рждрзЗ)                  | local (ржирж┐рж░рзНржжрж┐рж╖рзНржЯ view-ржП)               |
| Request/Response handle ржХрж░рзЗ | рж╣рзНржпрж╛ржБ                                | ржирж╛, рж╢рзБржзрзБржорж╛рждрзНрж░ view-ржПрж░ ржЖржЧрзЗ/ржкрж░рзЗ          |
| Initialization рж╕ржорзЯ          | Django ржЪрж▓рж╛рж░ рж╕ржорзЯ                      | Python runtime-ржП (function define рж╕ржорзЯ) |



###  Middleware chaining (View wrapping)
Middleware ржЧрзБрж▓рзЛ ржПрж░ржХржо ржХрж╛ржЬ ржХрж░рзЗ:

```python
# middlewares = ["middleware1", "middleware2", "middleware3"]
final_view = middleware1(
                  middleware2(
                      middleware3(
                          original_view
                      )
                  )
              )
```

ржПржЦрж╛ржирзЗ   тАЬserver run рж╣рж▓рзЗ view = middleware(view)тАЭ

### Decorator ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржХрзА рж╣рзЯ?

```python
@my_decorator
def my_view(request):
    ...

```
тЮбя╕П Python internally ржХрж░рзЗ:

```python
my_view = my_decorator(my_view)
```


### ржжрзБржЗржЯрж╛рзЯ ржПржХрж╕рж╛ржерзЗ  use  ржХрж░рж▓рзЗ (middleware,decoretor)

```python
# middlewares = ["middleware1", "middleware2", "middleware3"]
# @mydecorator
# def original_view;

final_view = middleware1(
                  middleware2(
                      middleware3(
                          my_decorator(original_view)
                      )
                  )
              )
```

#### ЁЯФД Execution Order (console output):

```pgsql

middleware1 before view
decorator before view
Inside view
decorator after view
middleware1 after view


```


| ржмрж┐рж╖рзЯ                          | Summary                                                   |
| ----------------------------- | --------------------------------------------------------- |
| **Middleware**                | Request/Response ржПрж░ ржорж╛ржЭржЦрж╛ржирзЗ ржмрж╕рзЗ ржХрж╛ржЬ ржХрж░рзЗ; рж╕ржм view-рждрзЗ ржЪрж╛рж▓рж╛рзЯ |
| **Decorator**                 | View-ржПрж░ ржЖржЧрзЗ/ржкрж░рзЗ ржЖрж▓рж╛ржжрж╛ ржХрж╛ржЬ ржХрж░рзЗ; рж╢рзБржзрзБ ржУржЗ view-рждрзЗржЗ           |
| **Function-based Middleware** | Simple function ржпрж╛ request ржирж┐рзЯрзЗ response ржлрзЗрж░ржд ржжрзЗрзЯ         |
| **Class-based Middleware**    | Full control ржжрзЗрзЯ, Django ржПрж░ ржирждрзБржи рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб            |
| **Custom Decorator**          | View ржПрж░ ржЖржЧрзЗ/ржкрж░рзЗ ржирж┐ржЬрж╕рзНржм logic ржЪрж╛рж▓рж╛рзЯ                        |


---
##  `Middleware is actually a special kind of decorator.`


### тЬЕ Part 3 : Decorator ржУ Permission based view

#### ЁЯФ╣ рзз. Decorator ржХрзА?
`Decorator` рж╣рж▓рзЛ Python-ржПрж░ ржПржХ ржзрж░ржирзЗрж░ ржлрж╛ржВрж╢ржи ржпрж╛ ржЕржирзНржп ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржмрж╛ ржнрж┐ржЙ-ржХрзЗ modify ржмрж╛ enhance ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред

Django-рждрзЗ ржмрзНржпржмрж╣рзГржд common decorators:

- `@login_required`
- `@permission_required`
- `@user_passes_test`

---

#### ЁЯФ╣ рзи. ржХрзЗржи Decorator ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐?
тЬЕ View ржХрзЗ protected ржХрж░рждрзЗ
тЬЕ ржХрзЛржи ржнрж┐ржЙрждрзЗ рж╢рзБржзрзБ logged-in user access ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ рждрж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рждрзЗ
тЬЕ Custom condition apply ржХрж░рждрзЗ (ржпрзЗржоржи: рж╢рзБржзрзБ staff user, рж╢рзБржзрзБ superuser)

---

## ЁЯФ╣ рзй. `@login_required` ржмрзНржпржмрж╣рж╛рж░

#### тЬЕ ржЙржжрзНржжрзЗрж╢рзНржп:
ржпржжрж┐ user рж▓ржЧ ржЗржи ржирж╛ ржХрж░рзЗ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ рждрж╛ржХрзЗ login ржкрзЗржЬрзЗ redirect ржХрж░ржмрзЗред

#### тЬЕ ржмрзНржпржмрж╣рж╛рж░:
```python
from django.contrib.auth.decorators import login_required
@login_required(login_url='/accounts/login/')
def dashboard(request):
    return render(request, 'dashboard.html')
```

#### ЁЯФ╣ рзк. @permission_required ржмрзНржпржмрж╣рж╛рж░

#### тЬЕ ржЙржжрзНржжрзЗрж╢рзНржп:

User-ржПрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ permission ржЖржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗред ржирж╛ ржерж╛ржХрж▓рзЗ 403 Forbidden ржжрж┐ржмрзЗред

#### тЬЕ ржмрзНржпржмрж╣рж╛рж░:

```python
from django.contrib.auth.decorators import permission_required

@permission_required('app_label.permission_codename', raise_exception=True)
def my_view(request):
    return render(request, 'secure_page.html')

```

ЁЯФН ржмрзБржЭрзЗ ржирзЗржи:

- 'app_label.permission_codename' = eg: 'products.add_product'

- raise_exception=True ржжрж┐рж▓рзЗ login ржирж╛ ржерж╛ржХрж╛ ржмрж╛ permission ржирж╛ ржерж╛ржХрж▓рзЗ 403 ржжрж┐ржмрзЗред

#### ЁЯФ╣ рзл. @user_passes_test ржжрж┐рзЯрзЗ Custom Check

#### тЬЕ Example:

```python
from django.contrib.auth.decorators import user_passes_test

def is_admin(user):
    return user.is_superuser

@user_passes_test(is_admin)
def admin_dashboard(request):
    return render(request, 'admin.html')
```

#### ЁЯФ╣  рзм. Model Permission ржирж╛ржо ржЧрзБрж▓рзЛ ржХрзАржнрж╛ржмрзЗ рждрзИрж░рж┐ рж╣рзЯ?

- Model: Product

| ржХрж╛ржЬ            | Permission Codename |
| -------------- | ------------------- |
| Add product    | `add_product`       |
| Change product | `change_product`    |
| Delete product | `delete_product`    |
| View product   | `view_product`      |


Format: 'app_label.codename'


#### ЁЯФ╣ рзн. Permission Add ржХрж░рж╛рж░ ржирж┐рзЯржо (admin panel ржерзЗржХрзЗ)
Admin panel тЖТ User тЖТ Permissions тЖТ тЬЕ Select required permissions тЖТ Save

ЁЯза Bonus: Custom Permission рждрзИрж░рж┐ (Model Meta ржХрзНрж▓рж╛рж╕рзЗ)

```
class Product(models.Model):
    name = models.CharField(max_length=100)

    class Meta:
        permissions = [
            ("can_publish", "Can Publish Product"),
        ]

```

####ЁЯФ╣ рзо. Function-based View (FBV) vs Class-based View (CBV) ржП Decorator
##### тЬЕ CBV ржП login_required ржмрзНржпржмрж╣рж╛рж░:
```python
from django.utils.decorators import method_decorator
from django.contrib.auth.decorators import login_required

@method_decorator(login_required, name='dispatch')
class DashboardView(View):
    def get(self, request):
        return render(request, 'dashboard.html')
```

| Decorator              | ржХрж╛ржЬ                                           |
| ---------------------- | --------------------------------------------- |
| `@login_required`      | Login ржЫрж╛рзЬрж╛ ржнрж┐ржЙ access ржХрж░рждрзЗ ржжрж┐ржмрзЗ ржирж╛            |
| `@permission_required` | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ permission ржЫрж╛рзЬрж╛ view access ржжрж┐ржмрзЗ ржирж╛ |
| `@user_passes_test`    | Custom logic check                            |
| Custom Decorator       | ржирж┐ржЬрзЗрж░ ржорждрзЛ ржХрж░рзЗ ржХрзЛржи logic enforce ржХрж░рж╛           |




